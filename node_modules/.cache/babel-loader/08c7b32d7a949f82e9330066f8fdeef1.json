{"ast":null,"code":"import _slicedToArray from\"/Users/nguyencanhnguyen/Public/Development/condi-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{NavLink}from\"react-router-dom\";import{favoritedArticles,myArticles}from\"../../apis\";import{useRouteMatch}from\"react-router-dom\";import{useSelector}from\"react-redux\";import ArticlePreview from\"../../../Home/components/ArticlePreview\";import{LIMIT}from\"../../../../constant\";import{Row}from\"react-bootstrap\";import Paginate from\"../../../../components/Paginate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ArticlesPreview(_ref){var slug=_ref.slug;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var token=window.localStorage.getItem(\"jwtToken\");var user=useSelector(function(state){return state.user.data;});var _useRouteMatch=useRouteMatch(),url=_useRouteMatch.url;var _useState3=useState(\"My\"),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setCount=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),offset=_useState8[0],setOffset=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),currentPage=_useState10[0],setCurrentPage=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];useEffect(function(){setOffset((currentPage-1)*LIMIT);},[currentPage]);var handleClickYourFeed=function handleClickYourFeed(){setSelected(\"My\");setLoading(true);setCurrentPage(1);};var handleClickGlobalFeed=function handleClickGlobalFeed(){setSelected(\"Favorited\");setLoading(true);setCurrentPage(1);};useEffect(function(){switch(selected){case\"My\":myArticles(slug,token,offset).then(function(res){setArticles(res.data.articles);setCount(res.data.articlesCount);setLoading(false);});break;case\"Favorited\":favoritedArticles(slug,token,offset).then(function(res){setArticles(res.data.articles);setCount(res.data.articlesCount);setLoading(false);});break;default:break;}},[selected,offset,token,slug]);var onSelectedPage=function onSelectedPage(pageNum){setCurrentPage(pageNum);setLoading(true);};var onPrev=function onPrev(){setCurrentPage(currentPage-1);setLoading(true);};var onNext=function onNext(){setCurrentPage(currentPage+1);setLoading(true);};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-xs-12 col-md-10 offset-md-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"articles-toggle\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-pills outline-active\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(NavLink,{className:selected===\"My\"?\"nav-link active\":\"nav-link\",to:url,activeClassName:\"selected\",onClick:handleClickYourFeed,children:slug===user.username?\"My articles\":\"\".concat(slug.charAt(0).toUpperCase()).concat(slug.slice(1),\"'s articles\")})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(NavLink,{className:selected===\"Favorited\"?\"nav-link active\":\"nav-link\",to:url,activeClassName:\"selected\",onClick:handleClickGlobalFeed,children:\"Favorited articles\"})})]})}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ArticlePreview,{feeds:articles}),count>LIMIT&&/*#__PURE__*/_jsx(Row,{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(Paginate,{pageNumber:Math.ceil(count/LIMIT),currentPage:currentPage,onSelectPage:onSelectedPage,handlePrev:onPrev,handleNext:onNext})})]})]})})});}","map":{"version":3,"sources":["/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Profile/components/ArticlesPreview/index.tsx"],"names":["useEffect","useState","NavLink","favoritedArticles","myArticles","useRouteMatch","useSelector","ArticlePreview","LIMIT","Row","Paginate","ArticlesPreview","slug","articles","setArticles","token","window","localStorage","getItem","user","state","data","url","selected","setSelected","count","setCount","offset","setOffset","currentPage","setCurrentPage","loading","setLoading","handleClickYourFeed","handleClickGlobalFeed","then","res","articlesCount","onSelectedPage","pageNum","onPrev","onNext","username","charAt","toUpperCase","slice","display","justifyContent","Math","ceil"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { favoritedArticles, myArticles } from \"../../apis\";\nimport { useRouteMatch } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport ArticlePreview from \"../../../Home/components/ArticlePreview\";\nimport { RootState } from \"../../../..\";\nimport { LIMIT } from \"../../../../constant\";\nimport { Row } from \"react-bootstrap\";\nimport Paginate from \"../../../../components/Paginate\";\nimport { Article } from \"../../../../interfaces\";\n\nexport default function ArticlesPreview({ slug }: { slug: string }) {\n  const [articles, setArticles] = useState<Article[]>([]);\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const user = useSelector((state: RootState) => state.user.data);\n  const { url } = useRouteMatch();\n  const [selected, setSelected] = useState<string>(\"My\");\n\n  const [count, setCount] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [currentPage, setCurrentPage] = useState<number>(1);\n\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    setOffset((currentPage - 1) * LIMIT);\n  }, [currentPage]);\n\n  const handleClickYourFeed = () => {\n    setSelected(\"My\");\n    setLoading(true);\n    setCurrentPage(1);\n  };\n\n  const handleClickGlobalFeed = () => {\n    setSelected(\"Favorited\");\n    setLoading(true);\n    setCurrentPage(1);\n  };\n\n  useEffect(() => {\n    switch (selected) {\n      case \"My\":\n        myArticles(slug, token, offset).then((res) => {\n          setArticles(res.data.articles);\n          setCount(res.data.articlesCount);\n          setLoading(false);\n        });\n        break;\n\n      case \"Favorited\":\n        favoritedArticles(slug, token, offset).then((res) => {\n          setArticles(res.data.articles);\n          setCount(res.data.articlesCount);\n          setLoading(false);\n        });\n        break;\n\n      default:\n        break;\n    }\n  }, [selected, offset, token, slug]);\n\n  const onSelectedPage = (pageNum: number) => {\n    setCurrentPage(pageNum);\n    setLoading(true);\n  };\n\n  const onPrev = () => {\n    setCurrentPage(currentPage - 1);\n    setLoading(true);\n  };\n\n  const onNext = () => {\n    setCurrentPage(currentPage + 1);\n    setLoading(true);\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-xs-12 col-md-10 offset-md-1\">\n          <div className=\"articles-toggle\">\n            <ul className=\"nav nav-pills outline-active\">\n              {\n                <li className=\"nav-item\">\n                  <NavLink\n                    className={\n                      selected === \"My\" ? \"nav-link active\" : \"nav-link\"\n                    }\n                    to={url}\n                    activeClassName=\"selected\"\n                    onClick={handleClickYourFeed}\n                  >\n                    {slug === user.username\n                      ? \"My articles\"\n                      : `${slug.charAt(0).toUpperCase()}${slug.slice(\n                          1\n                        )}'s articles`}\n                  </NavLink>\n                </li>\n              }\n              <li className=\"nav-item\">\n                <NavLink\n                  className={\n                    selected === \"Favorited\" ? \"nav-link active\" : \"nav-link\"\n                  }\n                  to={url}\n                  activeClassName=\"selected\"\n                  onClick={handleClickGlobalFeed}\n                >\n                  Favorited articles\n                </NavLink>\n              </li>\n            </ul>\n          </div>\n          {loading ? (\n            <div>Loading...</div>\n          ) : (\n            <div>\n              <ArticlePreview feeds={articles} />\n              {count > LIMIT && (\n                <Row style={{ display: \"flex\", justifyContent: \"center\" }}>\n                  <Paginate\n                    pageNumber={Math.ceil(count / LIMIT)}\n                    currentPage={currentPage}\n                    onSelectPage={onSelectedPage}\n                    handlePrev={onPrev}\n                    handleNext={onNext}\n                  />\n                </Row>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}