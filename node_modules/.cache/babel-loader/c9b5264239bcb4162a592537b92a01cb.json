{"ast":null,"code":"import _slicedToArray from\"/Users/nguyencanhnguyen/Public/Development/condi-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{useHistory}from\"react-router\";import{IMG_NOAVATAR}from\"../../../../constant\";import{deleteFollowing,postFollowing}from\"../../../Articles/apis\";import{getProfile}from\"../../apis\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfileInformation(_ref){var slug=_ref.slug;var user=useSelector(function(state){return state.user.data;});var _useState=useState(),_useState2=_slicedToArray(_useState,2),focusUser=_useState2[0],setFocusUser=_useState2[1];var history=useHistory();var token=window.localStorage.getItem(\"jwtToken\");useEffect(function(){getProfile(token,slug).then(function(res){setFocusUser(res.data.profile);});},[slug,token]);var handleClickEdit=function handleClickEdit(){history.push(\"/settings\");};var handleFollow=function handleFollow(){if(focusUser===null||focusUser===void 0?void 0:focusUser.following){deleteFollowing(token,focusUser===null||focusUser===void 0?void 0:focusUser.username).then(function(res){setFocusUser(res.data.profile);});}else{postFollowing(token,focusUser===null||focusUser===void 0?void 0:focusUser.username).then(function(res){setFocusUser(res.data.profile);});}};return/*#__PURE__*/_jsx(\"div\",{className:\"profile-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"user-info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-xs-12 col-md-10 offset-md-1\",children:[(focusUser===null||focusUser===void 0?void 0:focusUser.image)?/*#__PURE__*/_jsx(\"img\",{src:focusUser===null||focusUser===void 0?void 0:focusUser.image,className:\"user-img\",alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{src:IMG_NOAVATAR,className:\"user-img\",alt:\"\"}),/*#__PURE__*/_jsx(\"h4\",{children:focusUser===null||focusUser===void 0?void 0:focusUser.username}),/*#__PURE__*/_jsx(\"p\",{children:(focusUser===null||focusUser===void 0?void 0:focusUser.bio)||\"...\"}),user.username!==(focusUser===null||focusUser===void 0?void 0:focusUser.username)?/*#__PURE__*/_jsxs(\"button\",{className:!(focusUser===null||focusUser===void 0?void 0:focusUser.following)?\"btn btn-sm btn-outline-primary \":\"btn btn-sm btn-primary \",onClick:handleFollow,children:[(focusUser===null||focusUser===void 0?void 0:focusUser.following)?/*#__PURE__*/_jsx(\"i\",{}):/*#__PURE__*/_jsx(\"i\",{className:\"ion-plus-round\"}),\"\\xA0\",\" \",(focusUser===null||focusUser===void 0?void 0:focusUser.following)?\"Unfollow \".concat(focusUser===null||focusUser===void 0?void 0:focusUser.username):\"Follow \".concat(focusUser===null||focusUser===void 0?void 0:focusUser.username),/*#__PURE__*/_jsx(\"span\",{className:\"counter\"})]}):/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-outline-secondary action-btn\",onClick:handleClickEdit,children:[/*#__PURE__*/_jsx(\"i\",{className:\"ion-plus-round\"}),\"\\xA0 Edit profile\"]})]})})})})});}","map":{"version":3,"sources":["/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Profile/components/ProfileInformation/index.tsx"],"names":["useEffect","useState","useSelector","useHistory","IMG_NOAVATAR","deleteFollowing","postFollowing","getProfile","ProfileInformation","slug","user","state","data","focusUser","setFocusUser","history","token","window","localStorage","getItem","then","res","profile","handleClickEdit","push","handleFollow","following","username","image","bio"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport { RootState } from \"../../../..\";\nimport { IMG_NOAVATAR } from \"../../../../constant\";\nimport { User } from \"../../../../interfaces\";\nimport { deleteFollowing, postFollowing } from \"../../../Articles/apis\";\nimport { getProfile } from \"../../apis\";\n\nexport default function ProfileInformation({ slug }: { slug: string }) {\n  const user = useSelector((state: RootState) => state.user.data);\n  const [focusUser, setFocusUser] = useState<User>();\n  const history = useHistory();\n  const token = window.localStorage.getItem(\"jwtToken\");\n\n  useEffect(() => {\n    getProfile(token, slug).then((res) => {\n      setFocusUser(res.data.profile);\n    });\n  }, [slug, token]);\n\n  const handleClickEdit = () => {\n    history.push(\"/settings\");\n  };\n\n  const handleFollow = () => {\n    if (focusUser?.following) {\n      deleteFollowing(token, focusUser?.username).then((res: any) => {\n        setFocusUser(res.data.profile);\n      });\n    } else {\n      postFollowing(token, focusUser?.username).then((res: any) => {\n        setFocusUser(res.data.profile);\n      });\n    }\n  };\n\n  return (\n    <div className=\"profile-page\">\n      <div className=\"user-info\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-xs-12 col-md-10 offset-md-1\">\n              {focusUser?.image ? (\n                <img src={focusUser?.image} className=\"user-img\" alt=\"\" />\n              ) : (\n                <img src={IMG_NOAVATAR} className=\"user-img\" alt=\"\" />\n              )}\n              <h4>{focusUser?.username}</h4>\n              <p>{focusUser?.bio || \"...\"}</p>\n              {user.username !== focusUser?.username ? (\n                <button\n                  className={\n                    !focusUser?.following\n                      ? \"btn btn-sm btn-outline-primary \"\n                      : \"btn btn-sm btn-primary \"\n                  }\n                  onClick={handleFollow}\n                >\n                  {focusUser?.following ? (\n                    <i></i>\n                  ) : (\n                    <i className=\"ion-plus-round\"></i>\n                  )}\n                  &nbsp;{\" \"}\n                  {focusUser?.following\n                    ? `Unfollow ${focusUser?.username}`\n                    : `Follow ${focusUser?.username}`}\n                  <span className=\"counter\"></span>\n                </button>\n              ) : (\n                <button\n                  className=\"btn btn-sm btn-outline-secondary action-btn\"\n                  onClick={handleClickEdit}\n                >\n                  <i className=\"ion-plus-round\"></i>\n                  &nbsp; Edit profile\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}