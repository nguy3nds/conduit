{"ast":null,"code":"import _slicedToArray from\"/Users/nguyencanhnguyen/Public/Development/condi-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{NavLink}from\"react-router-dom\";import{yourArticles,globalArticles,globalArticlesNoToken}from\"./apis/index\";import ArticlePreview from\"./components/ArticlePreview\";import Tags from\"./components/Tags\";import{getArticleByTag,getArticleByTagNoToken,getTags}from\"./components/Tags/apis\";import{Row}from\"react-bootstrap\";import Paginate from\"../../components/Paginate\";import{LIMIT}from\"../../constant\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(_ref){var userToken=_ref.userToken;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),feeds=_useState2[0],setFeeds=_useState2[1];//Pagination\nvar _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),offset=_useState6[0],setOffset=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tags=_useState10[0],setTags=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),tagName=_useState12[0],setTagName=_useState12[1];var token=window.localStorage.getItem(\"jwtToken\");var _useState13=useState(\"Global\"),_useState14=_slicedToArray(_useState13,2),nameApiToLoad=_useState14[0],setNameApiToLoad=_useState14[1];useEffect(function(){setOffset(currentPage-1);},[currentPage]);var handleClickYourFeed=function handleClickYourFeed(){setNameApiToLoad(\"Your\");setTagName(\"\");console.log(\"Run your feed\");};var handleClickGlobalFeed=function handleClickGlobalFeed(){setNameApiToLoad(\"Global\");setTagName(\"\");};var getArticlesByTag=function getArticlesByTag(tag){setTagName(tag);setNameApiToLoad(\"Tags\");};useEffect(function(){switch(nameApiToLoad){case\"Your\":yourArticles(token,offset).then(function(res){setFeeds(res.data.articles);setCount(res.data.articlesCount);});break;case\"Global\":if(token){globalArticles(token,offset).then(function(res){setFeeds(res.data.articles);setCount(res.data.articlesCount);});}else{globalArticlesNoToken(offset).then(function(res){setFeeds(res.data.articles);setCount(res.data.articlesCount);});}break;case\"Tags\":if(token){getArticleByTag(tagName,token).then(function(res){setFeeds(res.data.articles);setCount(res.data.articlesCount);setTagName(tagName);});}else{getArticleByTagNoToken(tagName).then(function(res){setFeeds(res.data.articles);setCount(res.data.articlesCount);setTagName(tagName);});}break;default:break;}},[nameApiToLoad,offset,token,tagName]);useEffect(function(){getTags().then(function(res){setTags(res.data.tags);});handleClickGlobalFeed();},[]);var onSelectedPage=function onSelectedPage(pageNum){setCurrentPage(pageNum);};var onPrev=function onPrev(){setCurrentPage(currentPage-1);};var onNext=function onNext(){setCurrentPage(currentPage+1);};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"banner\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"logo-font\",children:\"conduit\"}),/*#__PURE__*/_jsx(\"p\",{children:\"A place to share your knowledge.\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"feed-toggle\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-pills outline-active\",children:[token?/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(NavLink,{className:nameApiToLoad===\"Your\"?\"nav-link active\":\"nav-link\",to:\"\",activeClassName:\"selected\",onClick:handleClickYourFeed,children:\"Your feed\"})}):/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(NavLink,{className:nameApiToLoad===\"Global\"?\"nav-link active\":\"nav-link\",to:\"\",activeClassName:\"selected\",onClick:handleClickGlobalFeed,children:\"Global Feed\"})}),tagName?/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(NavLink,{className:nameApiToLoad===\"Tags\"?\"nav-link active\":\"nav-link\",to:\"\",activeClassName:\"selected\",children:[\"# \",tagName]})}):/*#__PURE__*/_jsx(\"li\",{})]})}),/*#__PURE__*/_jsx(ArticlePreview,{feeds:feeds}),count>LIMIT&&/*#__PURE__*/_jsx(Row,{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(Paginate,{pageNumber:Math.ceil(count/LIMIT),currentPage:currentPage,onSelectPage:onSelectedPage,handlePrev:onPrev,handleNext:onNext})})]}),/*#__PURE__*/_jsx(Tags,{tags:tags,getArticlesByTag:getArticlesByTag})]})})]});}","map":{"version":3,"sources":["/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Home/index.tsx"],"names":["useEffect","useState","NavLink","yourArticles","globalArticles","globalArticlesNoToken","ArticlePreview","Tags","getArticleByTag","getArticleByTagNoToken","getTags","Row","Paginate","LIMIT","Home","userToken","feeds","setFeeds","count","setCount","offset","setOffset","currentPage","setCurrentPage","tags","setTags","tagName","setTagName","token","window","localStorage","getItem","nameApiToLoad","setNameApiToLoad","handleClickYourFeed","console","log","handleClickGlobalFeed","getArticlesByTag","tag","then","res","data","articles","articlesCount","onSelectedPage","pageNum","onPrev","onNext","display","justifyContent","Math","ceil"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { Article } from \"../../interfaces\";\nimport {\n  yourArticles,\n  globalArticles,\n  globalArticlesNoToken,\n} from \"./apis/index\";\nimport ArticlePreview from \"./components/ArticlePreview\";\nimport Tags from \"./components/Tags\";\nimport {\n  getArticleByTag,\n  getArticleByTagNoToken,\n  getTags,\n} from \"./components/Tags/apis\";\nimport { Row } from \"react-bootstrap\";\nimport Paginate from \"../../components/Paginate\";\nimport { LIMIT } from \"../../constant\";\n\nexport default function Home({ userToken }: { userToken: boolean }) {\n  const [feeds, setFeeds] = useState<Article[]>([]);\n  //Pagination\n  const [count, setCount] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [currentPage, setCurrentPage] = useState<number>(1);\n\n  const [tags, setTags] = useState<String[]>([]);\n  const [tagName, setTagName] = useState<String>(\"\");\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const [nameApiToLoad, setNameApiToLoad] = useState(\"Global\");\n\n  useEffect(() => {\n    setOffset(currentPage - 1);\n  }, [currentPage]);\n\n  const handleClickYourFeed = () => {\n    setNameApiToLoad(\"Your\");\n    setTagName(\"\");\n    console.log(\"Run your feed\");\n  };\n\n  const handleClickGlobalFeed = () => {\n    setNameApiToLoad(\"Global\");\n    setTagName(\"\");\n  };\n\n  const getArticlesByTag = (tag: String) => {\n    setTagName(tag);\n    setNameApiToLoad(\"Tags\");\n  };\n\n  useEffect(() => {\n    switch (nameApiToLoad) {\n      case \"Your\":\n        yourArticles(token, offset).then((res) => {\n          setFeeds(res.data.articles);\n          setCount(res.data.articlesCount);\n        });\n        break;\n\n      case \"Global\":\n        if (token) {\n          globalArticles(token, offset).then((res) => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n          });\n        } else {\n          globalArticlesNoToken(offset).then((res) => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n          });\n        }\n        break;\n\n      case \"Tags\":\n        if (token) {\n          getArticleByTag(tagName, token).then((res) => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setTagName(tagName);\n          });\n        } else {\n          getArticleByTagNoToken(tagName).then((res) => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setTagName(tagName);\n          });\n        }\n        break;\n\n      default:\n        break;\n    }\n  }, [nameApiToLoad, offset, token, tagName]);\n\n  useEffect(() => {\n    getTags().then((res) => {\n      setTags(res.data.tags);\n    });\n    handleClickGlobalFeed();\n  }, []);\n\n  const onSelectedPage = (pageNum: number) => {\n    setCurrentPage(pageNum);\n  };\n\n  const onPrev = () => {\n    setCurrentPage(currentPage - 1);\n  };\n\n  const onNext = () => {\n    setCurrentPage(currentPage + 1);\n  };\n\n  return (\n    <div className=\"home-page\">\n      <div className=\"banner\">\n        <div className=\"container\">\n          <h1 className=\"logo-font\">conduit</h1>\n          <p>A place to share your knowledge.</p>\n        </div>\n      </div>\n      <div className=\"container page\">\n        <div className=\"row\">\n          <div className=\"col-md-9\">\n            <div className=\"feed-toggle\">\n              <ul className=\"nav nav-pills outline-active\">\n                {token ? (\n                  <li className=\"nav-item\">\n                    <NavLink\n                      className={\n                        nameApiToLoad === \"Your\"\n                          ? \"nav-link active\"\n                          : \"nav-link\"\n                      }\n                      to=\"\"\n                      activeClassName=\"selected\"\n                      onClick={handleClickYourFeed}\n                    >\n                      Your feed\n                    </NavLink>\n                  </li>\n                ) : (\n                  <li></li>\n                )}\n                <li className=\"nav-item\">\n                  <NavLink\n                    className={\n                      nameApiToLoad === \"Global\"\n                        ? \"nav-link active\"\n                        : \"nav-link\"\n                    }\n                    to=\"\"\n                    activeClassName=\"selected\"\n                    onClick={handleClickGlobalFeed}\n                  >\n                    Global Feed\n                  </NavLink>\n                </li>\n                {tagName ? (\n                  <li className=\"nav-item\">\n                    <NavLink\n                      className={\n                        nameApiToLoad === \"Tags\"\n                          ? \"nav-link active\"\n                          : \"nav-link\"\n                      }\n                      to=\"\"\n                      activeClassName=\"selected\"\n                    >\n                      # {tagName}\n                    </NavLink>\n                  </li>\n                ) : (\n                  <li></li>\n                )}\n              </ul>\n            </div>\n            <ArticlePreview feeds={feeds} />\n\n            {count > LIMIT && (\n              <Row style={{ display: \"flex\", justifyContent: \"center\" }}>\n                <Paginate\n                  pageNumber={Math.ceil(count / LIMIT)}\n                  currentPage={currentPage}\n                  onSelectPage={onSelectedPage}\n                  handlePrev={onPrev}\n                  handleNext={onNext}\n                />\n              </Row>\n            )}\n          </div>\n          <Tags tags={tags} getArticlesByTag={getArticlesByTag} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}