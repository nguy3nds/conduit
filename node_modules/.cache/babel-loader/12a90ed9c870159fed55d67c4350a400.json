{"ast":null,"code":"var _jsxFileName = \"/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Articles/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router\";\nimport { NavLink } from \"react-router-dom\";\nimport { userByToken } from \"../../apis\";\nimport { deleteFavorite, postFavorite } from \"../Home/components/ArticlePreview/ArticleItem/apis\";\nimport { getProfile } from \"../Profile/apis\";\nimport { deleteArticle, deleteFollowing, getArticle, postFollowing } from \"./apis\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Articles() {\n  _s();\n\n  var _article$author, _article$author2, _article$author3, _article$author5, _article$author6, _article$tagList;\n\n  const {\n    slug\n  } = useParams();\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const [article, setArticle] = useState();\n  const [checkAuthor, setCheckAuthor] = useState(false);\n  const [likeCount, setLikeCount] = useState(article === null || article === void 0 ? void 0 : article.favoritesCount);\n  const [likeState, setLikeState] = useState();\n  const history = useHistory();\n  const [followState, setFollowState] = useState();\n  useEffect(() => {\n    getArticle(slug, token).then(responseArticle => {\n      var _responseArticle$data, _responseArticle$data2;\n\n      console.log(responseArticle);\n      setArticle(responseArticle.data.article);\n      setLikeState((_responseArticle$data = responseArticle.data.article) === null || _responseArticle$data === void 0 ? void 0 : _responseArticle$data.favorited);\n      setLikeCount((_responseArticle$data2 = responseArticle.data.article) === null || _responseArticle$data2 === void 0 ? void 0 : _responseArticle$data2.favoritesCount);\n      userByToken(token).then(responseUser => {\n        if (responseUser.data.user.username == responseArticle.data.article.author.username) setCheckAuthor(true);else setCheckAuthor(false);\n      });\n      getProfile(token, responseArticle.data.article.author.username).then(res => {\n        if (res.data.profile.following) setFollowState(true);else setFollowState(false);\n      });\n    });\n  }, [slug]);\n\n  const handleFavorite = slug => {\n    if (likeState) {\n      deleteFavorite(token, slug).then(res => {\n        var _res$data$article;\n\n        setLikeCount((_res$data$article = res.data.article) === null || _res$data$article === void 0 ? void 0 : _res$data$article.favoritesCount);\n        setLikeState(false);\n      });\n    } else {\n      postFavorite(token, slug).then(res => {\n        var _res$data$article2;\n\n        setLikeCount((_res$data$article2 = res.data.article) === null || _res$data$article2 === void 0 ? void 0 : _res$data$article2.favoritesCount);\n        setLikeState(true);\n      });\n    }\n  };\n\n  const handleFollowing = username => {\n    if (followState) {\n      deleteFollowing(token, username).then(res => {\n        setFollowState(false);\n      });\n    } else {\n      postFollowing(token, username).then(res => {\n        setFollowState(true);\n      });\n    }\n  };\n\n  const handleDelete = () => {\n    deleteArticle(slug, token).then(res => {\n      history.push(\"\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"article-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"banner\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: article === null || article === void 0 ? void 0 : article.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"article-meta\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: (article === null || article === void 0 ? void 0 : (_article$author = article.author) === null || _article$author === void 0 ? void 0 : _article$author.image) ? article.author.image : \"https://static.productionready.io/images/smiley-cyrus.jpg\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info\",\n            children: [/*#__PURE__*/_jsxDEV(NavLink, {\n              to: \"/profile/\" + (article === null || article === void 0 ? void 0 : (_article$author2 = article.author) === null || _article$author2 === void 0 ? void 0 : _article$author2.username),\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: article === null || article === void 0 ? void 0 : (_article$author3 = article.author) === null || _article$author3 === void 0 ? void 0 : _article$author3.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"date\",\n              children: article === null || article === void 0 ? void 0 : article.updatedAt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), token ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: checkAuthor ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(NavLink, {\n                to: \"/editor/\" + (article === null || article === void 0 ? void 0 : article.slug),\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-sm btn-outline-secondary\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"ion-edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 25\n                  }, this), \"\\xA0 Edit Article\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 21\n              }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-outline-danger\",\n                onClick: handleDelete,\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"ion-trash-a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 23\n                }, this), \"\\xA0 Delete Article\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-outline-secondary\",\n                onClick: () => {\n                  var _article$author4;\n\n                  return handleFollowing(article === null || article === void 0 ? void 0 : (_article$author4 = article.author) === null || _article$author4 === void 0 ? void 0 : _article$author4.username);\n                },\n                children: [followState ? /*#__PURE__*/_jsxDEV(\"i\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"ion-plus-round\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 25\n                }, this), \"\\xA0\", \" \", followState ? `Unfollow ${article === null || article === void 0 ? void 0 : (_article$author5 = article.author) === null || _article$author5 === void 0 ? void 0 : _article$author5.username}` : `Follow ${article === null || article === void 0 ? void 0 : (_article$author6 = article.author) === null || _article$author6 === void 0 ? void 0 : _article$author6.username}`, /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"counter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 21\n              }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-outline-primary\",\n                onClick: () => handleFavorite(article === null || article === void 0 ? void 0 : article.slug),\n                children: [likeState ? /*#__PURE__*/_jsxDEV(\"i\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 36\n                }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"ion-heart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 46\n                }, this), \"\\xA0 \", likeState ? \"Unfavorite Post\" : \"Favorite Post\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"counter\",\n                  children: [\"(\", likeCount, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row article-content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: article === null || article === void 0 ? void 0 : article.body\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tag-list\",\n        children: article === null || article === void 0 ? void 0 : (_article$tagList = article.tagList) === null || _article$tagList === void 0 ? void 0 : _article$tagList.map(tag => /*#__PURE__*/_jsxDEV(\"span\", {\n          \"ng-repeat\": \"tag in $ctrl.article.tagList\",\n          className: \"tag-default tag-pill ng-binding ng-scope\",\n          children: tag\n        }, tag, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-12 col-md-8 offset-md-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"card comment-form\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-block\",\n              children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"form-control\",\n                placeholder: \"Write a comment...\",\n                rows: 3\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"http://i.imgur.com/Qr71crq.jpg\",\n                className: \"comment-author-img\",\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-primary\",\n                children: \"Post Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-block\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: \"With supporting text below as a natural lead-in to additional content.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"\",\n                className: \"comment-author\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"http://i.imgur.com/Qr71crq.jpg\",\n                  className: \"comment-author-img\",\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"\",\n                className: \"comment-author\",\n                children: \"Jacob Schmidt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"date-posted\",\n                children: \"Dec 29th\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-block\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: \"With supporting text below as a natural lead-in to additional content.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"\",\n                className: \"comment-author\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"http://i.imgur.com/Qr71crq.jpg\",\n                  className: \"comment-author-img\",\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"\",\n                className: \"comment-author\",\n                children: \"Jacob Schmidt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"date-posted\",\n                children: \"Dec 29th\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mod-options\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"ion-edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"ion-trash-a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Articles, \"+DmsUT8gCLdFPq9dvK5E8xnu14k=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = Articles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Articles\");","map":{"version":3,"sources":["/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Articles/index.tsx"],"names":["useEffect","useState","useHistory","useParams","NavLink","userByToken","deleteFavorite","postFavorite","getProfile","deleteArticle","deleteFollowing","getArticle","postFollowing","Articles","slug","token","window","localStorage","getItem","article","setArticle","checkAuthor","setCheckAuthor","likeCount","setLikeCount","favoritesCount","likeState","setLikeState","history","followState","setFollowState","then","responseArticle","console","log","data","favorited","responseUser","user","username","author","res","profile","following","handleFavorite","handleFollowing","handleDelete","push","title","image","updatedAt","body","tagList","map","tag"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router\";\nimport { NavLink } from \"react-router-dom\";\nimport { Article, Profile } from \"../../interfaces\";\nimport { userByToken } from \"../../apis\";\n\nimport {\n  deleteFavorite,\n  postFavorite,\n} from \"../Home/components/ArticlePreview/ArticleItem/apis\";\nimport { getProfile } from \"../Profile/apis\";\nimport {\n  deleteArticle,\n  deleteFollowing,\n  getArticle,\n  postFollowing,\n} from \"./apis\";\nimport { AxiosResponse } from \"axios\";\n\nexport default function Articles() {\n  const { slug }: any = useParams();\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const [article, setArticle] = useState<Article>();\n  const [checkAuthor, setCheckAuthor] = useState(false);\n  const [likeCount, setLikeCount] = useState<number | undefined>(\n    article?.favoritesCount\n  );\n  const [likeState, setLikeState] = useState<boolean>();\n  const history = useHistory();\n  const [followState, setFollowState] = useState<boolean>();\n  useEffect(() => {\n    getArticle(slug, token).then((responseArticle) => {\n      console.log(responseArticle);\n      setArticle(responseArticle.data.article);\n      setLikeState(responseArticle.data.article?.favorited);\n      setLikeCount(responseArticle.data.article?.favoritesCount);\n      userByToken(token).then((responseUser) => {\n        if (\n          responseUser.data.user.username ==\n          responseArticle.data.article.author.username\n        )\n          setCheckAuthor(true);\n        else setCheckAuthor(false);\n      });\n      getProfile(token, responseArticle.data.article.author.username).then(\n        (res: AxiosResponse<any | Profile>) => {\n          if (res.data.profile.following) setFollowState(true);\n          else setFollowState(false);\n        }\n      );\n    });\n  }, [slug]);\n\n  const handleFavorite = (slug: string | undefined) => {\n    if (likeState) {\n      deleteFavorite(token, slug).then((res: any) => {\n        setLikeCount(res.data.article?.favoritesCount);\n        setLikeState(false);\n      });\n    } else {\n      postFavorite(token, slug).then((res) => {\n        setLikeCount(res.data.article?.favoritesCount);\n        setLikeState(true);\n      });\n    }\n  };\n  const handleFollowing = (username: string | undefined) => {\n    if (followState) {\n      deleteFollowing(token, username).then((res) => {\n        setFollowState(false);\n      });\n    } else {\n      postFollowing(token, username).then((res) => {\n        setFollowState(true);\n      });\n    }\n  };\n  const handleDelete = () => {\n    deleteArticle(slug, token).then((res) => {\n      history.push(\"\");\n    });\n  };\n\n  return (\n    <div className=\"article-page\">\n      <div className=\"banner\">\n        <div className=\"container\">\n          <h1>{article?.title}</h1>\n          <div className=\"article-meta\">\n            <img\n              src={\n                article?.author?.image\n                  ? article.author.image\n                  : \"https://static.productionready.io/images/smiley-cyrus.jpg\"\n              }\n              alt=\"\"\n            />\n            <div className=\"info\">\n              <NavLink to={\"/profile/\" + article?.author?.username}>\n                <h5>{article?.author?.username}</h5>\n              </NavLink>\n              <span className=\"date\">{article?.updatedAt}</span>\n            </div>\n            {token ? (\n              <div>\n                {checkAuthor ? (\n                  <div>\n                    <NavLink to={\"/editor/\" + article?.slug}>\n                      <button className=\"btn btn-sm btn-outline-secondary\">\n                        <i className=\"ion-edit\"></i>\n                        &nbsp; Edit Article\n                      </button>\n                    </NavLink>\n                    &nbsp;&nbsp;\n                    <button\n                      className=\"btn btn-sm btn-outline-danger\"\n                      onClick={handleDelete}\n                    >\n                      <i className=\"ion-trash-a\"></i>\n                      &nbsp; Delete Article\n                    </button>\n                  </div>\n                ) : (\n                  <div>\n                    <button\n                      className=\"btn btn-sm btn-outline-secondary\"\n                      onClick={() => handleFollowing(article?.author?.username)}\n                    >\n                      {followState ? (\n                        <i></i>\n                      ) : (\n                        <i className=\"ion-plus-round\"></i>\n                      )}\n                      &nbsp;{\" \"}\n                      {followState\n                        ? `Unfollow ${article?.author?.username}`\n                        : `Follow ${article?.author?.username}`}\n                      <span className=\"counter\"></span>\n                    </button>\n                    &nbsp;&nbsp;\n                    <button\n                      className=\"btn btn-sm btn-outline-primary\"\n                      onClick={() => handleFavorite(article?.slug)}\n                    >\n                      {likeState ? <i></i> : <i className=\"ion-heart\"></i>}\n                      &nbsp; {likeState ? \"Unfavorite Post\" : \"Favorite Post\"}\n                      <span className=\"counter\">({likeCount})</span>\n                    </button>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div></div>\n            )}\n          </div>\n        </div>\n      </div>\n      <div className=\"container page\">\n        <div className=\"row article-content\">\n          <div className=\"col-md-12\">\n            <p>{article?.body}</p>\n          </div>\n        </div>\n        <div className=\"tag-list\">\n          {article?.tagList?.map((tag: any) => (\n            <span\n              key={tag}\n              ng-repeat=\"tag in $ctrl.article.tagList\"\n              className=\"tag-default tag-pill ng-binding ng-scope\"\n            >\n              {tag}\n            </span>\n          ))}\n        </div>\n        <hr />\n        <div className=\"row\">\n          <div className=\"col-xs-12 col-md-8 offset-md-2\">\n            <form className=\"card comment-form\">\n              <div className=\"card-block\">\n                <textarea\n                  className=\"form-control\"\n                  placeholder=\"Write a comment...\"\n                  rows={3}\n                ></textarea>\n              </div>\n              <div className=\"card-footer\">\n                <img\n                  src=\"http://i.imgur.com/Qr71crq.jpg\"\n                  className=\"comment-author-img\"\n                  alt=\"\"\n                />\n                <button className=\"btn btn-sm btn-primary\">Post Comment</button>\n              </div>\n            </form>\n            <div className=\"card\">\n              <div className=\"card-block\">\n                <p className=\"card-text\">\n                  With supporting text below as a natural lead-in to additional\n                  content.\n                </p>\n              </div>\n              <div className=\"card-footer\">\n                <a href=\"\" className=\"comment-author\">\n                  <img\n                    src=\"http://i.imgur.com/Qr71crq.jpg\"\n                    className=\"comment-author-img\"\n                    alt=\"\"\n                  />\n                </a>\n                &nbsp;\n                <a href=\"\" className=\"comment-author\">\n                  Jacob Schmidt\n                </a>\n                <span className=\"date-posted\">Dec 29th</span>\n              </div>\n            </div>\n            <div className=\"card\">\n              <div className=\"card-block\">\n                <p className=\"card-text\">\n                  With supporting text below as a natural lead-in to additional\n                  content.\n                </p>\n              </div>\n              <div className=\"card-footer\">\n                <a href=\"\" className=\"comment-author\">\n                  <img\n                    src=\"http://i.imgur.com/Qr71crq.jpg\"\n                    className=\"comment-author-img\"\n                    alt=\"\"\n                  />\n                </a>\n                &nbsp;\n                <a href=\"\" className=\"comment-author\">\n                  Jacob Schmidt\n                </a>\n                <span className=\"date-posted\">Dec 29th</span>\n                <span className=\"mod-options\">\n                  <i className=\"ion-edit\"></i>\n                  <i className=\"ion-trash-a\"></i>\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}