{"ast":null,"code":"var _jsxFileName = \"/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Articles/Components/Comment/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { NavLink } from \"react-router-dom\";\nimport AlertDialog from \"../../../../components/Modals/AlertDialog\";\nimport { deleteComment, getComments, getCommentsNoToken, postComment } from \"../../apis/comment\";\nimport FormComment from \"./FormComment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Comment({\n  slug\n}) {\n  _s();\n\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const [comments, setComments] = useState();\n  const user = useSelector(state => {\n    var _state$user;\n\n    return state === null || state === void 0 ? void 0 : (_state$user = state.user) === null || _state$user === void 0 ? void 0 : _state$user.data;\n  });\n  useEffect(() => {\n    if (token) {\n      getComments(slug, token).then(res => {\n        setComments(res.data.comments);\n      });\n    } else {\n      getCommentsNoToken(slug).then(res => {\n        setComments(res.data.comments);\n      });\n    }\n  }, []);\n\n  const getComment = comment => {\n    postComment(comment, slug, token).then(res => {\n      getComments(slug, token).then(res => {\n        setComments(res.data.comments);\n      });\n    });\n  };\n\n  const handleDelete = id => {\n    setOpen(true);\n    setID(id);\n  };\n\n  const [id, setID] = useState();\n  const [open, setOpen] = useState(false);\n\n  const handleAgree = () => {\n    deleteComment(id, slug, token).then(res => {\n      getComments(slug, token).then(res => {\n        setComments(res.data.comments);\n      });\n    });\n    handleClose();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"article-page\",\n    children: [/*#__PURE__*/_jsxDEV(AlertDialog, {\n      open: open,\n      setOpen: setOpen,\n      slug: slug,\n      token: token,\n      handleAgree: handleAgree,\n      handleClose: handleClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-xs-12 col-md-8 offset-md-2\",\n        children: [token ? /*#__PURE__*/_jsxDEV(FormComment, {\n          getComment: getComment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 20\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 62\n        }, this), comments === null || comments === void 0 ? void 0 : comments.map(comment => {\n          var _comment$author, _comment$author2, _comment$author3, _comment$author4;\n\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-block\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: comment === null || comment === void 0 ? void 0 : comment.body\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: (comment === null || comment === void 0 ? void 0 : (_comment$author = comment.author) === null || _comment$author === void 0 ? void 0 : _comment$author.image) ? comment.author.image : \"https://static.productionready.io/images/smiley-cyrus.jpg\",\n                className: \"comment-author-img\",\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 17\n              }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(NavLink, {\n                className: \"nav-link comment-author\",\n                to: \"/profile/\" + (comment === null || comment === void 0 ? void 0 : (_comment$author2 = comment.author) === null || _comment$author2 === void 0 ? void 0 : _comment$author2.username),\n                activeClassName: \"selected\",\n                children: comment === null || comment === void 0 ? void 0 : (_comment$author3 = comment.author) === null || _comment$author3 === void 0 ? void 0 : _comment$author3.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"date-posted\",\n                children: comment === null || comment === void 0 ? void 0 : comment.updatedAt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, this), (user === null || user === void 0 ? void 0 : user.username) === (comment === null || comment === void 0 ? void 0 : (_comment$author4 = comment.author) === null || _comment$author4 === void 0 ? void 0 : _comment$author4.username) ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mod-options\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"ion-trash-a\",\n                  onClick: () => handleDelete(comment === null || comment === void 0 ? void 0 : comment.id)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)]\n          }, comment === null || comment === void 0 ? void 0 : comment.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Comment, \"YROrPFuBZDM3jMkFJDb8Z1nWTq0=\", false, function () {\n  return [useSelector];\n});\n\n_c = Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Articles/Components/Comment/index.tsx"],"names":["useEffect","useState","useSelector","NavLink","AlertDialog","deleteComment","getComments","getCommentsNoToken","postComment","FormComment","Comment","slug","token","window","localStorage","getItem","comments","setComments","user","state","data","then","res","getComment","comment","handleDelete","id","setOpen","setID","open","handleAgree","handleClose","map","body","author","image","username","updatedAt"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { NavLink } from \"react-router-dom\";\nimport { RootState } from \"../../../..\";\nimport AlertDialog from \"../../../../components/Modals/AlertDialog\";\nimport {\n  deleteComment,\n  getComments,\n  getCommentsNoToken,\n  postComment,\n} from \"../../apis/comment\";\nimport FormComment from \"./FormComment\";\n\nexport default function Comment({ slug }: { slug: string }) {\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const [comments, setComments] = useState<any>();\n  const user = useSelector((state: RootState) => state?.user?.data);\n\n  useEffect(() => {\n    if (token) {\n      getComments(slug, token).then((res) => {\n        setComments(res.data.comments);\n      });\n    } else {\n      getCommentsNoToken(slug).then((res) => {\n        setComments(res.data.comments);\n      });\n    }\n  }, []);\n\n  const getComment = (comment: String) => {\n    postComment(comment, slug, token).then((res: any) => {\n      getComments(slug, token).then((res) => {\n        setComments(res.data.comments);\n      });\n    });\n  };\n  const handleDelete = (id: string) => {\n    setOpen(true);\n    setID(id);\n  };\n\n  const [id, setID] = useState<any>();\n\n  const [open, setOpen] = useState(false);\n\n  const handleAgree = () => {\n    deleteComment(id, slug, token).then((res: any) => {\n      getComments(slug, token).then((res) => {\n        setComments(res.data.comments);\n      });\n    });\n    handleClose();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className=\"article-page\">\n      <AlertDialog\n        open={open}\n        setOpen={setOpen}\n        slug={slug}\n        token={token}\n        handleAgree={handleAgree}\n        handleClose={handleClose}\n      />\n      <div className=\"row\">\n        <div className=\"col-xs-12 col-md-8 offset-md-2\">\n          {token ? <FormComment getComment={getComment} /> : <div></div>}\n          {comments?.map((comment: any) => (\n            <div className=\"card\" key={comment?.id}>\n              <div className=\"card-block\">\n                <p className=\"card-text\">{comment?.body}</p>\n              </div>\n              <div className=\"card-footer\">\n                <img\n                  src={\n                    comment?.author?.image\n                      ? comment.author.image\n                      : \"https://static.productionready.io/images/smiley-cyrus.jpg\"\n                  }\n                  className=\"comment-author-img\"\n                  alt=\"\"\n                />\n                &nbsp;\n                <NavLink\n                  className=\"nav-link comment-author\"\n                  to={\"/profile/\" + comment?.author?.username}\n                  activeClassName=\"selected\"\n                >\n                  {comment?.author?.username}\n                </NavLink>\n                <span className=\"date-posted\">{comment?.updatedAt}</span>\n                {user?.username === comment?.author?.username ? (\n                  <span className=\"mod-options\">\n                    <i\n                      className=\"ion-trash-a\"\n                      onClick={() => handleDelete(comment?.id)}\n                    ></i>\n                  </span>\n                ) : (\n                  <span></span>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}