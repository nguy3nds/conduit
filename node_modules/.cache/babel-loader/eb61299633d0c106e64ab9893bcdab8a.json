{"ast":null,"code":"import _slicedToArray from\"/Users/nguyencanhnguyen/Public/Development/condi-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import\"./App.css\";import Editor from\"./pages/Editor\";import Footer from\"./components/Footer\";import Header from\"./components/Header\";import Home from\"./pages/Home\";import SignIn from\"./pages/SignIn\";import Profile from\"./pages/Profile\";import Settings from\"./pages/Settings\";import Articles from\"./pages/Articles\";import{BrowserRouter as Router,Switch,Route,Redirect}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import SignUp from\"./pages/SignUp\";import GuardedRoute from\"./components/Route/GaurdRoute\";import{saveUserInStore}from\"./redux/actions\";import{userByToken}from\"./apis\";// import { RootState } from \".\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var dispatch=useDispatch();var user=useSelector(function(state){var _state$user;return state===null||state===void 0?void 0:(_state$user=state.user)===null||_state$user===void 0?void 0:_state$user.data;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loginState=_useState2[0],setLoginState=_useState2[1];var token=window.localStorage.getItem(\"jwtToken\");useEffect(function(){if(token&&!(user===null||user===void 0?void 0:user.username)){userByToken(token).then(function(res){var user=res.data.user;dispatch(saveUserInStore.saveUserInStoreSuccess(user));});}},[token,user,dispatch]);useEffect(function(){var token=window.localStorage.getItem(\"jwtToken\");if(token){setLoginState(true);}else{setLoginState(false);}},[user]);useEffect(function(){document.title=(user===null||user===void 0?void 0:user.username)?\"@\".concat(user===null||user===void 0?void 0:user.username,\" - Conduit\"):\"Conduit\";},[user]);return/*#__PURE__*/_jsxs(Router,{basename:process.env.PUBLIC_URL,children:[/*#__PURE__*/_jsx(Header,{userToken:loginState}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Home,{userToken:loginState})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",children:/*#__PURE__*/_jsx(SignIn,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",children:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsx(GuardedRoute,{exact:true,path:\"/editor\",auth:window.localStorage.getItem(\"jwtToken\"),Component:Editor}),/*#__PURE__*/_jsx(GuardedRoute,{path:\"/editor/:slug\",auth:window.localStorage.getItem(\"jwtToken\"),Component:Editor}),/*#__PURE__*/_jsx(GuardedRoute,{path:\"/settings\",auth:window.localStorage.getItem(\"jwtToken\"),Component:Settings}),/*#__PURE__*/_jsx(GuardedRoute,{path:\"/profile\",auth:window.localStorage.getItem(\"jwtToken\"),Component:Profile}),/*#__PURE__*/_jsx(GuardedRoute,{path:\"/profile/\".concat(user.username),auth:window.localStorage.getItem(\"jwtToken\"),Component:Profile}),/*#__PURE__*/_jsx(Route,{path:\"/article/:slug\",children:/*#__PURE__*/_jsx(Articles,{})}),/*#__PURE__*/_jsx(Redirect,{to:\"/\"})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default App;","map":{"version":3,"sources":["/Users/nguyencanhnguyen/Public/Development/condi-app/src/App.tsx"],"names":["React","useEffect","useState","Editor","Footer","Header","Home","SignIn","Profile","Settings","Articles","BrowserRouter","Router","Switch","Route","Redirect","useDispatch","useSelector","SignUp","GuardedRoute","saveUserInStore","userByToken","App","dispatch","user","state","data","loginState","setLoginState","token","window","localStorage","getItem","username","then","res","saveUserInStoreSuccess","document","title","process","env","PUBLIC_URL"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport Editor from \"./pages/Editor\";\nimport Footer from \"./components/Footer\";\nimport Header from \"./components/Header\";\nimport Home from \"./pages/Home\";\nimport SignIn from \"./pages/SignIn\";\nimport Profile from \"./pages/Profile\";\nimport Settings from \"./pages/Settings\";\nimport Articles from \"./pages/Articles\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport SignUp from \"./pages/SignUp\";\nimport GuardedRoute from \"./components/Route/GaurdRoute\";\nimport { saveUserInStore } from \"./redux/actions\";\nimport { userByToken } from \"./apis\";\n// import { RootState } from \".\";\n\nfunction App() {\n  const dispatch = useDispatch();\n  const user = useSelector((state: any) => state?.user?.data);\n  const [loginState, setLoginState] = useState<boolean>(false);\n  const token = window.localStorage.getItem(\"jwtToken\");\n\n  useEffect(() => {\n    if (token && !user?.username) {\n      userByToken(token).then((res) => {\n        const user = res.data.user;\n        dispatch(saveUserInStore.saveUserInStoreSuccess(user));\n      });\n    }\n  }, [token, user, dispatch]);\n\n  useEffect(() => {\n    const token = window.localStorage.getItem(\"jwtToken\");\n    if (token) {\n      setLoginState(true);\n    } else {\n      setLoginState(false);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    document.title = user?.username\n      ? `@${user?.username} - Conduit`\n      : \"Conduit\";\n  }, [user]);\n\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <Header userToken={loginState} />\n      <Switch>\n        <Route exact path=\"/\">\n          <Home userToken={loginState} />\n        </Route>\n        <Route path=\"/login\">\n          <SignIn />\n        </Route>\n        <Route path=\"/register\">\n          <SignUp />\n        </Route>\n        <GuardedRoute\n          exact\n          path=\"/editor\"\n          auth={window.localStorage.getItem(\"jwtToken\")}\n          Component={Editor}\n        ></GuardedRoute>\n        <GuardedRoute\n          path=\"/editor/:slug\"\n          auth={window.localStorage.getItem(\"jwtToken\")}\n          Component={Editor}\n        ></GuardedRoute>\n        <GuardedRoute\n          path=\"/settings\"\n          auth={window.localStorage.getItem(\"jwtToken\")}\n          Component={Settings}\n        ></GuardedRoute>\n        <GuardedRoute\n          path={`/profile`}\n          auth={window.localStorage.getItem(\"jwtToken\")}\n          Component={Profile}\n        ></GuardedRoute>\n        <GuardedRoute\n          path={`/profile/${user.username}`}\n          auth={window.localStorage.getItem(\"jwtToken\")}\n          Component={Profile}\n        ></GuardedRoute>\n        <Route path=\"/article/:slug\">\n          <Articles />\n        </Route>\n        <Redirect to=\"/\" />\n      </Switch>\n      <Footer />\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}