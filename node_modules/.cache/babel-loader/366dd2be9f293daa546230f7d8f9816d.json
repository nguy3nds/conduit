{"ast":null,"code":"var _jsxFileName = \"/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Home/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { yourArticles, globalArticles, globalArticlesNoToken } from \"./apis/index\";\nimport ArticlePreview from \"./components/ArticlePreview\";\nimport Tags from \"./components/Tags\";\nimport { getArticleByTag, getTags, getArticleByTagNoToken } from \"./components/Tags/apis\";\nimport Paginate from \"../../components/Paginate\";\nimport { LIMIT } from \"../../constant\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home({\n  userToken\n}) {\n  _s();\n\n  const [feeds, setFeeds] = useState([]); //Pagination\n\n  const [count, setCount] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1); // loading\n\n  const [loading, setLoading] = useState(true); //\n\n  const [tags, setTags] = useState([]);\n  const [tagName, setTagName] = useState(\"\");\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const [nameApiToLoad, setNameApiToLoad] = useState(\"Global\");\n  useEffect(() => {\n    setOffset((currentPage - 1) * LIMIT);\n  }, [currentPage]);\n\n  const handleClickYourFeed = () => {\n    if (nameApiToLoad !== \"Your\") {\n      setLoading(true);\n      setNameApiToLoad(\"Your\");\n      setTagName(\"\");\n      setCurrentPage(1);\n    }\n  };\n\n  const handleClickGlobalFeed = () => {\n    if (nameApiToLoad !== \"Global\") {\n      setLoading(true);\n      setNameApiToLoad(\"Global\");\n      setTagName(\"\");\n      setCurrentPage(1);\n    }\n  };\n\n  const getArticlesByTag = tag => {\n    if (tag !== tagName) {\n      setLoading(true);\n      setTagName(tag);\n      setNameApiToLoad(\"Tags\");\n      setCurrentPage(1);\n    }\n  };\n\n  useEffect(() => {\n    switch (nameApiToLoad) {\n      case \"Your\":\n        yourArticles(token, offset).then(res => {\n          setFeeds(res.data.articles);\n          setCount(res.data.articlesCount);\n          setLoading(false);\n        });\n        break;\n\n      case \"Global\":\n        if (token) {\n          globalArticles(token, offset).then(res => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setLoading(false);\n          });\n        } else {\n          globalArticlesNoToken(offset).then(res => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setLoading(false);\n          });\n        }\n\n        break;\n\n      case \"Tags\":\n        if (token) {\n          getArticleByTag(tagName, token, offset).then(res => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setTagName(tagName);\n            setLoading(false);\n          });\n        } else {\n          getArticleByTagNoToken(tagName, offset).then(res => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setTagName(tagName);\n            setLoading(false);\n          });\n        }\n\n        break;\n\n      default:\n        break;\n    }\n  }, [nameApiToLoad, offset, token, tagName]);\n  useEffect(() => {\n    getTags().then(res => {\n      setTags(res.data.tags);\n    });\n    handleClickGlobalFeed();\n  }, []);\n\n  const onSelectedPage = pageNum => {\n    setCurrentPage(pageNum);\n    setLoading(true);\n  };\n\n  const onPrev = () => {\n    setCurrentPage(currentPage - 1);\n    setLoading(true);\n  };\n\n  const onNext = () => {\n    setCurrentPage(currentPage + 1);\n    setLoading(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"banner\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"logo-font\",\n          children: \"conduit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"A place to share your knowledge.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-9 col-xs-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"feed-toggle\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"nav nav-pills outline-active\",\n              children: [token ? /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"nav-item\",\n                children: /*#__PURE__*/_jsxDEV(NavLink, {\n                  className: nameApiToLoad === \"Your\" ? \"nav-link active\" : \"nav-link\",\n                  to: \"\",\n                  activeClassName: \"selected\",\n                  onClick: handleClickYourFeed,\n                  children: \"Your feed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"nav-item\",\n                children: /*#__PURE__*/_jsxDEV(NavLink, {\n                  className: nameApiToLoad === \"Global\" ? \"nav-link active\" : \"nav-link\",\n                  to: \"\",\n                  activeClassName: \"selected\",\n                  onClick: handleClickGlobalFeed,\n                  children: \"Global Feed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this), tagName ? /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"nav-item\",\n                children: /*#__PURE__*/_jsxDEV(NavLink, {\n                  className: nameApiToLoad === \"Tags\" ? \"nav-link active\" : \"nav-link\",\n                  to: \"\",\n                  activeClassName: \"selected\",\n                  children: [\"# \", tagName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(ArticlePreview, {\n              feeds: feeds\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this), count > LIMIT && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                justifyContent: \"center\",\n                width: \"100%\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Paginate, {\n                pageNumber: Math.ceil(count / LIMIT),\n                currentPage: currentPage,\n                onSelectPage: onSelectedPage,\n                handlePrev: onPrev,\n                handleNext: onNext\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tags, {\n          tags: tags,\n          getArticlesByTag: getArticlesByTag\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"+lAvB5lMfKvuStVJP+GbXh7ju40=\");\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Home/index.tsx"],"names":["useEffect","useState","NavLink","yourArticles","globalArticles","globalArticlesNoToken","ArticlePreview","Tags","getArticleByTag","getTags","getArticleByTagNoToken","Paginate","LIMIT","Home","userToken","feeds","setFeeds","count","setCount","offset","setOffset","currentPage","setCurrentPage","loading","setLoading","tags","setTags","tagName","setTagName","token","window","localStorage","getItem","nameApiToLoad","setNameApiToLoad","handleClickYourFeed","handleClickGlobalFeed","getArticlesByTag","tag","then","res","data","articles","articlesCount","onSelectedPage","pageNum","onPrev","onNext","display","justifyContent","width","Math","ceil"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { Article } from \"../../interfaces\";\nimport {\n  yourArticles,\n  globalArticles,\n  globalArticlesNoToken,\n} from \"./apis/index\";\nimport ArticlePreview from \"./components/ArticlePreview\";\nimport Tags from \"./components/Tags\";\nimport {\n  getArticleByTag,\n  getTags,\n  getArticleByTagNoToken,\n} from \"./components/Tags/apis\";\nimport Paginate from \"../../components/Paginate\";\nimport { LIMIT } from \"../../constant\";\n\nexport default function Home({ userToken }: { userToken: boolean }) {\n  const [feeds, setFeeds] = useState<Article[]>([]);\n  //Pagination\n  const [count, setCount] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  // loading\n  const [loading, setLoading] = useState(true);\n  //\n  const [tags, setTags] = useState<String[]>([]);\n  const [tagName, setTagName] = useState<String>(\"\");\n\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const [nameApiToLoad, setNameApiToLoad] = useState(\"Global\");\n\n  useEffect(() => {\n    setOffset((currentPage - 1) * LIMIT);\n  }, [currentPage]);\n\n  const handleClickYourFeed = () => {\n    if (nameApiToLoad !== \"Your\") {\n      setLoading(true);\n      setNameApiToLoad(\"Your\");\n      setTagName(\"\");\n      setCurrentPage(1);\n    }\n  };\n\n  const handleClickGlobalFeed = () => {\n    if (nameApiToLoad !== \"Global\") {\n      setLoading(true);\n      setNameApiToLoad(\"Global\");\n      setTagName(\"\");\n      setCurrentPage(1);\n    }\n  };\n\n  const getArticlesByTag = (tag: String) => {\n    if (tag !== tagName) {\n      setLoading(true);\n      setTagName(tag);\n      setNameApiToLoad(\"Tags\");\n      setCurrentPage(1);\n    }\n  };\n\n  useEffect(() => {\n    switch (nameApiToLoad) {\n      case \"Your\":\n        yourArticles(token, offset).then((res) => {\n          setFeeds(res.data.articles);\n          setCount(res.data.articlesCount);\n          setLoading(false);\n        });\n        break;\n\n      case \"Global\":\n        if (token) {\n          globalArticles(token, offset).then((res) => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setLoading(false);\n          });\n        } else {\n          globalArticlesNoToken(offset).then((res) => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setLoading(false);\n          });\n        }\n        break;\n\n      case \"Tags\":\n        if (token) {\n          getArticleByTag(tagName, token, offset).then((res) => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setTagName(tagName);\n            setLoading(false);\n          });\n        } else {\n          getArticleByTagNoToken(tagName, offset).then((res) => {\n            setFeeds(res.data.articles);\n            setCount(res.data.articlesCount);\n            setTagName(tagName);\n            setLoading(false);\n          });\n        }\n        break;\n\n      default:\n        break;\n    }\n  }, [nameApiToLoad, offset, token, tagName]);\n\n  useEffect(() => {\n    getTags().then((res) => {\n      setTags(res.data.tags);\n    });\n    handleClickGlobalFeed();\n  }, []);\n\n  const onSelectedPage = (pageNum: number) => {\n    setCurrentPage(pageNum);\n    setLoading(true);\n  };\n\n  const onPrev = () => {\n    setCurrentPage(currentPage - 1);\n    setLoading(true);\n  };\n\n  const onNext = () => {\n    setCurrentPage(currentPage + 1);\n    setLoading(true);\n  };\n\n  return (\n    <div className=\"home-page\">\n      <div className=\"banner\">\n        <div className=\"container\">\n          <h1 className=\"logo-font\">conduit</h1>\n          <p>A place to share your knowledge.</p>\n        </div>\n      </div>\n      <div className=\"container page\">\n        <div className=\"row\">\n          <div className=\"col-md-9 col-xs-12\">\n            <div className=\"feed-toggle\">\n              <ul className=\"nav nav-pills outline-active\">\n                {token ? (\n                  <li className=\"nav-item\">\n                    <NavLink\n                      className={\n                        nameApiToLoad === \"Your\"\n                          ? \"nav-link active\"\n                          : \"nav-link\"\n                      }\n                      to=\"\"\n                      activeClassName=\"selected\"\n                      onClick={handleClickYourFeed}\n                    >\n                      Your feed\n                    </NavLink>\n                  </li>\n                ) : (\n                  <li></li>\n                )}\n                <li className=\"nav-item\">\n                  <NavLink\n                    className={\n                      nameApiToLoad === \"Global\"\n                        ? \"nav-link active\"\n                        : \"nav-link\"\n                    }\n                    to=\"\"\n                    activeClassName=\"selected\"\n                    onClick={handleClickGlobalFeed}\n                  >\n                    Global Feed\n                  </NavLink>\n                </li>\n                {tagName ? (\n                  <li className=\"nav-item\">\n                    <NavLink\n                      className={\n                        nameApiToLoad === \"Tags\"\n                          ? \"nav-link active\"\n                          : \"nav-link\"\n                      }\n                      to=\"\"\n                      activeClassName=\"selected\"\n                    >\n                      # {tagName}\n                    </NavLink>\n                  </li>\n                ) : (\n                  <li></li>\n                )}\n              </ul>\n            </div>\n            {loading ? (\n              <div>Loading...</div>\n            ) : (\n              <div>\n                <ArticlePreview feeds={feeds} />\n                {count > LIMIT && (\n                  <div\n                    style={{\n                      display: \"flex\",\n                      justifyContent: \"center\",\n                      width: \"100%\",\n                    }}\n                  >\n                    <Paginate\n                      pageNumber={Math.ceil(count / LIMIT)}\n                      currentPage={currentPage}\n                      onSelectPage={onSelectedPage}\n                      handlePrev={onPrev}\n                      handleNext={onNext}\n                    />\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n          <Tags tags={tags} getArticlesByTag={getArticlesByTag} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}