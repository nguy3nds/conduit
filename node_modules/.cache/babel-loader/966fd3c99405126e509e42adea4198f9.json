{"ast":null,"code":"import _slicedToArray from\"/Users/nguyencanhnguyen/Public/Development/condi-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{NavLink}from\"react-router-dom\";import{deleteFavorite,postFavorite}from\"../apis\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ArticleItem(_ref){var _feed$author,_feed$author2,_feed$author3,_feed$tagList;var feed=_ref.feed;var token=window.localStorage.getItem(\"jwtToken\");var _useState=useState(feed===null||feed===void 0?void 0:feed.favoritesCount),_useState2=_slicedToArray(_useState,2),likeCount=_useState2[0],setLikeCount=_useState2[1];var _useState3=useState(feed===null||feed===void 0?void 0:feed.favorited),_useState4=_slicedToArray(_useState3,2),likeState=_useState4[0],setLikeState=_useState4[1];var handleLike=function handleLike(slug){if(token){if(likeState){deleteFavorite(token,slug).then(function(res){var _res$data$article;setLikeCount((_res$data$article=res.data.article)===null||_res$data$article===void 0?void 0:_res$data$article.favoritesCount);setLikeState(false);});}else{postFavorite(token,slug).then(function(res){var _res$data$article2;setLikeCount((_res$data$article2=res.data.article)===null||_res$data$article2===void 0?void 0:_res$data$article2.favoritesCount);setLikeState(true);});}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"article-preview\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"article-meta\",children:[/*#__PURE__*/_jsx(\"img\",{src:(feed===null||feed===void 0?void 0:(_feed$author=feed.author)===null||_feed$author===void 0?void 0:_feed$author.image)?feed.author.image:\"https://static.productionready.io/images/smiley-cyrus.jpg\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(NavLink,{to:\"/profile/\"+(feed===null||feed===void 0?void 0:(_feed$author2=feed.author)===null||_feed$author2===void 0?void 0:_feed$author2.username),children:/*#__PURE__*/_jsx(\"h5\",{children:feed===null||feed===void 0?void 0:(_feed$author3=feed.author)===null||_feed$author3===void 0?void 0:_feed$author3.username})}),/*#__PURE__*/_jsx(\"span\",{className:\"date\",children:feed===null||feed===void 0?void 0:feed.updatedAt})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary btn-sm pull-xs-right\",onClick:function onClick(){return handleLike(feed===null||feed===void 0?void 0:feed.slug);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"ion-heart\"}),\" \",likeCount]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-link\",children:[/*#__PURE__*/_jsx(\"h1\",{children:feed===null||feed===void 0?void 0:feed.title}),/*#__PURE__*/_jsx(\"p\",{children:feed===null||feed===void 0?void 0:feed.description}),/*#__PURE__*/_jsx(NavLink,{to:\"/article/\"+(feed===null||feed===void 0?void 0:feed.slug),className:\"preview-link\",children:\"Read more...\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"tag-list\",children:(_feed$tagList=feed.tagList)===null||_feed$tagList===void 0?void 0:_feed$tagList.map(function(tag,i){return/*#__PURE__*/_jsx(\"li\",{className:\"tag-default tag-pill tag-outline ng-binding ng-scope\",\"ng-repeat\":\"tag in $ctrl.article.tagList\",children:tag},i);})})]})]});}","map":{"version":3,"sources":["/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Home/components/ArticlePreview/ArticleItem/Components/index.tsx"],"names":["useState","NavLink","deleteFavorite","postFavorite","ArticleItem","feed","token","window","localStorage","getItem","favoritesCount","likeCount","setLikeCount","favorited","likeState","setLikeState","handleLike","slug","then","res","data","article","author","image","username","updatedAt","title","description","tagList","map","tag","i"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { Article } from \"../../../../../../interfaces\";\nimport { deleteFavorite, postFavorite } from \"../apis\";\n\nexport default function ArticleItem({ feed }: { feed: Article }) {\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const [likeCount, setLikeCount] = useState<number>(feed?.favoritesCount);\n  const [likeState, setLikeState] = useState<boolean>(feed?.favorited);\n\n  const handleLike = (slug: string) => {\n    if (token) {\n      if (likeState) {\n        deleteFavorite(token, slug).then((res) => {\n          setLikeCount(res.data.article?.favoritesCount);\n          setLikeState(false);\n        });\n      } else {\n        postFavorite(token, slug).then((res) => {\n          setLikeCount(res.data.article?.favoritesCount);\n          setLikeState(true);\n        });\n      }\n    }\n  };\n  return (\n    <div className=\"article-preview\">\n      <div className=\"article-meta\">\n        <img\n          src={\n            feed?.author?.image\n              ? feed.author.image\n              : \"https://static.productionready.io/images/smiley-cyrus.jpg\"\n          }\n          alt=\"\"\n        />\n        <div className=\"info\">\n          <NavLink to={\"/profile/\" + feed?.author?.username}>\n            <h5>{feed?.author?.username}</h5>\n          </NavLink>\n          <span className=\"date\">{feed?.updatedAt}</span>\n        </div>\n        <button\n          className=\"btn btn-outline-primary btn-sm pull-xs-right\"\n          onClick={() => handleLike(feed?.slug)}\n        >\n          <i className=\"ion-heart\"></i> {likeCount}\n        </button>\n      </div>\n      <div className=\"preview-link\">\n        <h1>{feed?.title}</h1>\n        <p>{feed?.description}</p>\n        <NavLink to={\"/article/\" + feed?.slug} className=\"preview-link\">\n          Read more...\n        </NavLink>\n        <ul className=\"tag-list\">\n          {feed.tagList?.map((tag, i) => (\n            <li\n              key={i}\n              className=\"tag-default tag-pill tag-outline ng-binding ng-scope\"\n              ng-repeat=\"tag in $ctrl.article.tagList\"\n            >\n              {tag}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}