{"ast":null,"code":"import _slicedToArray from\"/Users/nguyencanhnguyen/Public/Development/condi-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{NavLink}from\"react-router-dom\";import{favoritedArticles,myArticles}from\"../../apis\";import{useRouteMatch}from\"react-router-dom\";import{useSelector}from\"react-redux\";import ArticlePreview from\"../../../Home/components/ArticlePreview\";import{LIMIT}from\"../../../../constant\";import{Row}from\"react-bootstrap\";import Paginate from\"../../../../components/Paginate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ArticlesPreview(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var token=window.localStorage.getItem(\"jwtToken\");var user=useSelector(function(state){return state.user.data;});var _useRouteMatch=useRouteMatch(),url=_useRouteMatch.url;var _useState3=useState(\"My\"),_useState4=_slicedToArray(_useState3,2),nameApiToLoad=_useState4[0],setNameApiToLoad=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setCount=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),offset=_useState8[0],setOffset=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),currentPage=_useState10[0],setCurrentPage=_useState10[1];useEffect(function(){setOffset(currentPage-1);},[currentPage]);var handleClickYourFeed=function handleClickYourFeed(){console.log(\"hi\");setNameApiToLoad(\"My\");};var handleClickGlobalFeed=function handleClickGlobalFeed(){setNameApiToLoad(\"Favorited\");};useEffect(function(){handleClickYourFeed();},[]);useEffect(function(){switch(nameApiToLoad){case\"My\":myArticles(user===null||user===void 0?void 0:user.username,token,offset).then(function(res){setArticles(res.data.articles);setCount(res.data.articlesCount);});break;case\"Favorited\":favoritedArticles(user===null||user===void 0?void 0:user.username,token,offset).then(function(res){setArticles(res.data.articles);setCount(res.data.articlesCount);});break;default:break;}},[nameApiToLoad,offset,token,user===null||user===void 0?void 0:user.username]);var onSelectedPage=function onSelectedPage(pageNum){setCurrentPage(pageNum);};var onPrev=function onPrev(){setCurrentPage(currentPage-1);};var onNext=function onNext(){setCurrentPage(currentPage+1);};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-xs-12 col-md-10 offset-md-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"articles-toggle\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-pills outline-active\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(NavLink,{className:nameApiToLoad===\"My\"?\"nav-link active\":\"nav-link\",to:url,activeClassName:\"selected\",onClick:handleClickYourFeed,children:\"My articles\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(NavLink,{className:nameApiToLoad===\"Favorited\"?\"nav-link active\":\"nav-link\",to:url,activeClassName:\"selected\",onClick:handleClickGlobalFeed,children:\"Favorited articles\"})})]})}),/*#__PURE__*/_jsx(ArticlePreview,{feeds:articles}),count>LIMIT&&/*#__PURE__*/_jsx(Row,{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(Paginate,{pageNumber:Math.ceil(count/LIMIT),currentPage:currentPage,onSelectPage:onSelectedPage,handlePrev:onPrev,handleNext:onNext})})]})})});}","map":{"version":3,"sources":["/Users/nguyencanhnguyen/Public/Development/condi-app/src/pages/Profile/components/ArticlesPreview/index.tsx"],"names":["React","useEffect","useState","NavLink","favoritedArticles","myArticles","useRouteMatch","useSelector","ArticlePreview","LIMIT","Row","Paginate","ArticlesPreview","articles","setArticles","token","window","localStorage","getItem","user","state","data","url","nameApiToLoad","setNameApiToLoad","count","setCount","offset","setOffset","currentPage","setCurrentPage","handleClickYourFeed","console","log","handleClickGlobalFeed","username","then","res","articlesCount","onSelectedPage","pageNum","onPrev","onNext","display","justifyContent","Math","ceil"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { favoritedArticles, myArticles } from \"../../apis\";\nimport { useRouteMatch } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport ArticlePreview from \"../../../Home/components/ArticlePreview\";\nimport { Article } from \"../../../../interfaces\";\nimport { RootState } from \"../../../..\";\nimport { LIMIT } from \"../../../../constant\";\nimport { Row } from \"react-bootstrap\";\nimport Paginate from \"../../../../components/Paginate\";\n\nexport default function ArticlesPreview() {\n  const [articles, setArticles] = useState<Article[]>([]);\n  const token = window.localStorage.getItem(\"jwtToken\");\n  const user = useSelector((state: RootState) => state.user.data);\n  const { url } = useRouteMatch();\n  const [nameApiToLoad, setNameApiToLoad] = useState(\"My\");\n\n  const [count, setCount] = useState(0);\n  const [offset, setOffset] = useState(0);\n  const [currentPage, setCurrentPage] = useState<number>(1);\n\n  useEffect(() => {\n    setOffset(currentPage - 1);\n  }, [currentPage]);\n\n  const handleClickYourFeed = () => {\n    console.log(\"hi\");\n    setNameApiToLoad(\"My\");\n  };\n\n  const handleClickGlobalFeed = () => {\n    setNameApiToLoad(\"Favorited\");\n  };\n\n  useEffect(() => {\n    handleClickYourFeed();\n  }, []);\n\n  useEffect(() => {\n    switch (nameApiToLoad) {\n      case \"My\":\n        myArticles(user?.username, token, offset).then((res) => {\n          setArticles(res.data.articles);\n          setCount(res.data.articlesCount);\n        });\n        break;\n\n      case \"Favorited\":\n        favoritedArticles(user?.username, token, offset).then((res) => {\n          setArticles(res.data.articles);\n          setCount(res.data.articlesCount);\n        });\n        break;\n\n      default:\n        break;\n    }\n  }, [nameApiToLoad, offset, token, user?.username]);\n\n  const onSelectedPage = (pageNum: number) => {\n    setCurrentPage(pageNum);\n  };\n\n  const onPrev = () => {\n    setCurrentPage(currentPage - 1);\n  };\n\n  const onNext = () => {\n    setCurrentPage(currentPage + 1);\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-xs-12 col-md-10 offset-md-1\">\n          <div className=\"articles-toggle\">\n            <ul className=\"nav nav-pills outline-active\">\n              {\n                <li className=\"nav-item\">\n                  <NavLink\n                    className={\n                      nameApiToLoad === \"My\" ? \"nav-link active\" : \"nav-link\"\n                    }\n                    to={url}\n                    activeClassName=\"selected\"\n                    onClick={handleClickYourFeed}\n                  >\n                    My articles\n                  </NavLink>\n                </li>\n              }\n              <li className=\"nav-item\">\n                <NavLink\n                  className={\n                    nameApiToLoad === \"Favorited\"\n                      ? \"nav-link active\"\n                      : \"nav-link\"\n                  }\n                  to={url}\n                  activeClassName=\"selected\"\n                  onClick={handleClickGlobalFeed}\n                >\n                  Favorited articles\n                </NavLink>\n              </li>\n            </ul>\n          </div>\n          <ArticlePreview feeds={articles} />\n          {count > LIMIT && (\n            <Row style={{ display: \"flex\", justifyContent: \"center\" }}>\n              <Paginate\n                pageNumber={Math.ceil(count / LIMIT)}\n                currentPage={currentPage}\n                onSelectPage={onSelectedPage}\n                handlePrev={onPrev}\n                handleNext={onNext}\n              />\n            </Row>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}