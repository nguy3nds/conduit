(this["webpackJsonpmock-blog-app"]=this["webpackJsonpmock-blog-app"]||[]).push([[0],{119:function(e,t,a){},120:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(53),s=a.n(n),i=(a(119),a(4)),r=(a(120),a(13)),o=a(27),l=a(14),d=a(0);function j(e){var t=e.tags,a=e.setTags;return Object(d.jsx)("div",{className:"tag-list",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(d.jsxs)("span",{"ng-repeat":"tag in $ctrl.article.tagList",className:"tag-default tag-pill ng-binding ng-scope",children:[Object(d.jsx)("i",{className:"ion-close-round","ng-click":"$ctrl.removeTag(tag)",onClick:function(){return function(e){a((function(t){return t.filter((function(t,a){return a!==e}))}))}(t)}}),e]},t)}))})}var u=a(9),b=a.n(u),m="https://api.realworld.io",h=function(e){return b.a.get("".concat(m,"/api/user"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})},v=a(8);var O=Object(o.a)({mapPropsToValues:function(){return{title:"",description:"",content:""}},validationSchema:l.a().shape({title:l.b().required("Please provide a title"),description:l.b().required("Please provide a description"),content:l.b().required("Please provide content")}),handleSubmit:function(){}})((function(e){var t=Object(c.useState)(""),a=Object(i.a)(t,2),n=a[0],s=a[1],o=Object(c.useState)([]),l=Object(i.a)(o,2),u=l[0],h=l[1],O=Object(c.useState)(!1),p=Object(i.a)(O,2),f=(p[0],p[1]),x=window.localStorage.getItem("jwtToken"),g=Object(v.h)().slug,N=e.setFieldValue,w=Object(v.g)();return Object(c.useEffect)((function(){g?function(e){return b.a.get("".concat(m,"/api/articles/").concat(e),{headers:{"Content-Type":"application/json"}})}(g).then((function(e){var t=e.data.article;N("title",t.title),N("description",t.description),N("content",t.body),h(t.tagList)})):(N("title",""),N("description",""),N("content",""))}),[g,N]),Object(d.jsx)("div",{className:"editor-page",children:Object(d.jsx)("div",{className:"container page",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-10 offset-md-1 col-xs-12",children:Object(d.jsx)("form",{onSubmit:function(t){t.preventDefault(),g?function(e,t,a,c){return b.a.put("".concat(m,"/api/articles/").concat(c),{article:{title:null===e||void 0===e?void 0:e.title,description:null===e||void 0===e?void 0:e.description,body:null===e||void 0===e?void 0:e.content,tagList:t}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}(e.values,u,x,g).then((function(e){w.push("/article/".concat(g))})):function(e,t,a){return b.a.post("".concat(m,"/api/articles"),{article:{title:null===e||void 0===e?void 0:e.title,description:null===e||void 0===e?void 0:e.description,body:null===e||void 0===e?void 0:e.content,tagList:t}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}(e.values,u,x).then((function(e){var t=e.data.article.slug;w.push("/article/".concat(t))}))},children:Object(d.jsxs)("fieldset",{children:[Object(d.jsxs)("fieldset",{className:"form-group",children:[Object(d.jsx)("p",{className:"error-messages",children:e.errors.title}),Object(d.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"Article Title",name:"title",value:e.values.title,onChange:e.handleChange})]}),Object(d.jsxs)("fieldset",{className:"form-group",children:[Object(d.jsx)("p",{className:"error-messages",children:e.errors.description}),Object(d.jsx)("textarea",{rows:6,className:"form-control",placeholder:"What's this article about?",name:"description",value:e.values.description,onChange:e.handleChange})]}),Object(d.jsxs)("fieldset",{className:"form-group",children:[Object(d.jsx)("p",{className:"error-messages",children:e.errors.content}),Object(d.jsx)("textarea",{rows:6,className:"form-control",placeholder:"Write your article (in markdown)",name:"content",value:e.values.content,onChange:e.handleChange})]}),Object(d.jsxs)("fieldset",{className:"form-group",children:[Object(d.jsx)("input",{type:"text",className:"form-control",placeholder:"Write your tag",value:n,onKeyDown:function(e){var t=e.key,a=n.trim();if("Enter"===t&&a.length&&!(null===u||void 0===u?void 0:u.includes(a))&&(e.preventDefault(),h((function(e){return[].concat(Object(r.a)(e),[a])})),s("")),"Backspace"===t&&!n.length&&u.length){e.preventDefault();var c=Object(r.a)(u),i=c.pop();h(c),s(i)}f(!1)},onChange:function(e){var t=e.target.value;s(t)},onKeyUp:function(){f(!0)}}),Object(d.jsx)(j,{tags:u,setTags:h})]}),Object(d.jsx)("button",{className:"btn btn-lg pull-xs-right btn-primary",disabled:!e.isValid||!e.values.title,children:"Publish Article"})]})})})})})})}));function p(){return Object(d.jsx)("footer",{children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("a",{href:"/",className:"logo-font",children:"conduit"}),Object(d.jsxs)("span",{className:"attribution",children:["An interactive learning project from"," ",Object(d.jsx)("a",{href:"https://thinkster.io",children:"Thinkster"}),". Code & design licensed under MIT."]})]})})}var f=a(12),x=a(5);function g(e){var t=e.userToken,a=Object(f.c)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.data}));return t?Object(d.jsx)("div",{children:Object(d.jsx)("nav",{className:"navbar navbar-light",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(x.c,{className:"navbar-brand",to:"/",children:"conduit"}),Object(d.jsxs)("ul",{className:"nav navbar-nav pull-xs-right",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(x.c,{className:"nav-link",to:"/",exact:!0,children:"Home"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)(x.c,{className:"nav-link",to:"/editor",children:[Object(d.jsx)("i",{className:"ion-compose"}),"\xa0New Article"]})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)(x.c,{className:"nav-link",to:"/settings",children:[Object(d.jsx)("i",{className:"ion-gear-a"}),"\xa0Settings"]})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)(x.c,{className:"nav-link",to:"/profile/".concat(a.username),children:[Object(d.jsx)("i",{className:"ion-gear-a"}),"\xa0",null===a||void 0===a?void 0:a.username]})})]})]})})}):Object(d.jsx)("div",{children:Object(d.jsx)("nav",{className:"navbar navbar-light",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(x.c,{className:"navbar-brand",to:"/",children:"conduit"}),Object(d.jsxs)("ul",{className:"nav navbar-nav pull-xs-right",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(x.c,{className:"nav-link",to:"/",children:"Home"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(x.c,{className:"nav-link",to:"/login",children:"Sign in"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(x.c,{className:"nav-link",to:"/register",children:"Sign up"})})]})]})})})}var N={user:{isLoading:!1,data:{}}},w=function(e,t){return b.a.post("".concat(m,"/api/articles/").concat(t,"/favorite"),{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})},C=function(e,t){return b.a.delete("".concat(m,"/api/articles/").concat(t,"/favorite"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})};function S(e){var t,a,n,s,r=e.feed,o=window.localStorage.getItem("jwtToken"),l=Object(c.useState)(null===r||void 0===r?void 0:r.favoritesCount),j=Object(i.a)(l,2),u=j[0],b=j[1],m=Object(c.useState)(null===r||void 0===r?void 0:r.favorited),h=Object(i.a)(m,2),v=h[0],O=h[1];return Object(d.jsxs)("div",{className:"article-preview",children:[Object(d.jsxs)("div",{className:"article-meta",children:[Object(d.jsx)("img",{src:(null===r||void 0===r||null===(t=r.author)||void 0===t?void 0:t.image)?r.author.image:"https://static.productionready.io/images/smiley-cyrus.jpg",alt:""}),Object(d.jsxs)("div",{className:"info",children:[Object(d.jsx)(x.c,{to:"/profile/"+(null===r||void 0===r||null===(a=r.author)||void 0===a?void 0:a.username),children:Object(d.jsx)("h5",{children:null===r||void 0===r||null===(n=r.author)||void 0===n?void 0:n.username})}),Object(d.jsx)("span",{className:"date",children:null===r||void 0===r?void 0:r.updatedAt})]}),Object(d.jsxs)("button",{className:"btn btn-outline-primary btn-sm pull-xs-right",onClick:function(){return e=null===r||void 0===r?void 0:r.slug,void(o&&(v?C(o,e).then((function(e){var t;b(null===(t=e.data.article)||void 0===t?void 0:t.favoritesCount),O(!1)})):w(o,e).then((function(e){var t;b(null===(t=e.data.article)||void 0===t?void 0:t.favoritesCount),O(!0)}))));var e},children:[Object(d.jsx)("i",{className:"ion-heart"})," ",u]})]}),Object(d.jsxs)("div",{className:"preview-link",children:[Object(d.jsx)("h1",{children:null===r||void 0===r?void 0:r.title}),Object(d.jsx)("p",{children:null===r||void 0===r?void 0:r.description}),Object(d.jsx)(x.c,{to:"/article/"+(null===r||void 0===r?void 0:r.slug),className:"preview-link",children:"Read more..."}),Object(d.jsx)("ul",{className:"tag-list",children:null===(s=r.tagList)||void 0===s?void 0:s.map((function(e,t){return Object(d.jsx)("li",{className:"tag-default tag-pill tag-outline ng-binding ng-scope","ng-repeat":"tag in $ctrl.article.tagList",children:e},t)}))})]})]})}function y(e){var t=e.feeds;return Object(d.jsx)("div",{children:t&&t.length>0?t.map((function(e){return Object(d.jsx)("div",{children:Object(d.jsx)(S,{feed:e})},e.slug)})):Object(d.jsx)("p",{children:"No articles are here... yet."})})}function k(e){var t=e.tags,a=e.getArticlesByTag;return Object(d.jsx)("div",{className:"col-md-3",children:Object(d.jsxs)("div",{className:"sidebar",children:[Object(d.jsx)("p",{children:"Popular Tags"}),Object(d.jsx)("div",{className:"tag-list",children:t&&t.length>0?t.map((function(e,t){return Object(d.jsx)("span",{children:Object(d.jsx)(x.b,{to:"",className:"tag-pill tag-default",onClick:function(){return function(e){a(e)}(e)},children:e})},t)})):Object(d.jsx)("p",{children:"No tags are here... yet."})})]})})}var A=a(251),T=a(252);function U(e){for(var t=e.pageNumber,a=e.currentPage,c=e.onSelectPage,n=e.handlePrev,s=e.handleNext,i=[],r=function(e){i.push(Object(d.jsx)(T.a.Item,{active:e===a,onClick:function(){return c(e)},children:e},e))},o=1;o<=t;o++)r(o);return Object(d.jsx)("div",{children:Object(d.jsxs)(T.a,{children:[1!==a&&Object(d.jsx)(T.a.Prev,{onClick:n}),i,a!==t&&Object(d.jsx)(T.a.Next,{onClick:s})]})})}function E(e){e.userToken;var t=Object(c.useState)([]),a=Object(i.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(0),o=Object(i.a)(r,2),l=o[0],j=o[1],u=Object(c.useState)(0),h=Object(i.a)(u,2),v=h[0],O=h[1],p=Object(c.useState)(1),f=Object(i.a)(p,2),g=f[0],N=f[1],w=Object(c.useState)([]),C=Object(i.a)(w,2),S=C[0],T=C[1],E=Object(c.useState)(""),q=Object(i.a)(E,2),I=q[0],L=q[1],P=window.localStorage.getItem("jwtToken"),B=Object(c.useState)("Global"),z=Object(i.a)(B,2),R=z[0],F=z[1];Object(c.useEffect)((function(){O(g-1)}),[g]);var M=function(){F("Global"),L("")};Object(c.useEffect)((function(){switch(R){case"Your":(function(e,t){return b.a.get("".concat(m,"/api/articles/feed?limit=").concat(2,"&offset=").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})})(P,v).then((function(e){s(e.data.articles),j(e.data.articlesCount)}));break;case"Global":P?function(e,t){return b.a.get("".concat(m,"/api/articles?limit=").concat(2,"&offset=").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}(P,v).then((function(e){s(e.data.articles),j(e.data.articlesCount)})):function(e){return b.a.get("".concat(m,"/api/articles?limit=").concat(2,"&offset=").concat(e),{headers:{"Content-Type":"application/json"}})}(v).then((function(e){s(e.data.articles),j(e.data.articlesCount)}));break;case"Tags":P?function(e,t){return b.a.get("".concat(m,"/api/articles"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},params:{tag:e}})}(I,P).then((function(e){s(e.data.articles),j(e.data.articlesCount),L(I)})):(e=I,b.a.get("".concat(m,"/api/articles"),{headers:{"Content-Type":"application/json"},params:{tag:e}})).then((function(e){s(e.data.articles),j(e.data.articlesCount),L(I)}))}var e}),[R,v,P,I]),Object(c.useEffect)((function(){b.a.get("".concat(m,"/api/tags")).then((function(e){T(e.data.tags)})),M()}),[]);return Object(d.jsxs)("div",{className:"home-page",children:[Object(d.jsx)("div",{className:"banner",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{className:"logo-font",children:"conduit"}),Object(d.jsx)("p",{children:"A place to share your knowledge."})]})}),Object(d.jsx)("div",{className:"container page",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-md-9",children:[Object(d.jsx)("div",{className:"feed-toggle",children:Object(d.jsxs)("ul",{className:"nav nav-pills outline-active",children:[P?Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(x.c,{className:"Your"===R?"nav-link active":"nav-link",to:"",activeClassName:"selected",onClick:function(){F("Your"),L(""),console.log("Run your feed")},children:"Your feed"})}):Object(d.jsx)("li",{}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(x.c,{className:"Global"===R?"nav-link active":"nav-link",to:"",activeClassName:"selected",onClick:M,children:"Global Feed"})}),I?Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)(x.c,{className:"Tags"===R?"nav-link active":"nav-link",to:"",activeClassName:"selected",children:["# ",I]})}):Object(d.jsx)("li",{})]})}),Object(d.jsx)(y,{feeds:n}),l>2&&Object(d.jsx)(A.a,{style:{display:"flex",justifyContent:"center"},children:Object(d.jsx)(U,{pageNumber:Math.ceil(l/2),currentPage:g,onSelectPage:function(e){N(e)},handlePrev:function(){N(g-1)},handleNext:function(){N(g+1)}})})]}),Object(d.jsx)(k,{tags:S,getArticlesByTag:function(e){L(e),F("Tags")}})]})})]})}var q=a(253),I=a(72),L=function(e){return e().type},P=(Object(q.a)({getUserByTokenRequest:function(e){return e},getUserByTokenSuccess:function(e){return e},getUserByTokenFailure:function(e){return e}}),Object(q.a)({saveUserInStoreRequest:function(e){return e},saveUserInStoreSuccess:function(e){return e},saveUserInStoreFailure:function(e){return e}})),B=Object(I.a)("DELETE_USER");var z=Object(o.a)({mapPropsToValues:function(){return{email:"",password:""}},validationSchema:l.a().shape({email:l.b().email().required("Email is required"),password:l.b().required("Please provide a valid password")}),handleSubmit:function(){}})((function(e){var t=Object(f.b)(),a=Object(v.g)(),n=Object(c.useState)(!1),s=Object(i.a)(n,2),r=s[0],o=s[1];return Object(d.jsxs)("form",{onSubmit:function(c){c.preventDefault();var n,s=e.values,i=s.email,r=s.password;(n={email:i,password:r},b.a.post("".concat(m,"/api/users/login"),{user:{email:n.email,password:n.password},"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},{headers:{"Content-Type":"application/json"}})).then((function(e){var c=e.data.user;a.push("/"),t(P.saveUserInStoreSuccess({user:c})),window.localStorage.setItem("jwtToken",c.token)})).catch((function(e){return o(!0)}))},children:[Object(d.jsxs)("fieldset",{className:"form-group",children:[Object(d.jsx)("p",{className:"error-messages",children:r&&"Email or password is invalid"}),Object(d.jsx)("p",{className:"error-messages",children:e.errors.email}),Object(d.jsx)("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",name:"email",value:e.values.email,onChange:e.handleChange})]}),Object(d.jsxs)("fieldset",{className:"form-group",children:[Object(d.jsx)("p",{className:"error-messages",children:e.errors.password}),Object(d.jsx)("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",name:"password",value:e.values.password,onChange:e.handleChange})]}),Object(d.jsx)("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:!e.isValid||!e.values.email,children:"Sign in"})]})}));function R(){return Object(d.jsx)("div",{className:"auth-page",children:Object(d.jsx)("div",{className:"container page",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-md-6 offset-md-3 col-xs-12",children:[Object(d.jsx)("h1",{className:"text-xs-center",children:"Sign in"}),Object(d.jsx)("p",{className:"text-xs-center",children:Object(d.jsx)(x.b,{to:"/register",children:"Need an account?"})}),Object(d.jsx)(z,{})]})})})})}function F(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1],s=window.localStorage.getItem("jwtToken"),r=Object(f.c)((function(e){return e.user.data})),o=Object(v.i)().url,l=Object(c.useState)("My"),j=Object(i.a)(l,2),u=j[0],h=j[1],O=Object(c.useState)(0),p=Object(i.a)(O,2),g=p[0],N=p[1],w=Object(c.useState)(0),C=Object(i.a)(w,2),S=C[0],k=C[1],T=Object(c.useState)(1),E=Object(i.a)(T,2),q=E[0],I=E[1];Object(c.useEffect)((function(){k(q-1)}),[q]);var L=function(){console.log("hi"),h("My")};Object(c.useEffect)((function(){L()}),[]),Object(c.useEffect)((function(){switch(u){case"My":(function(e,t,a){return b.a.get("".concat(m,"/api/articles/?author=").concat(e,"&limit=").concat(2,"&offset=").concat(a),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})})(null===r||void 0===r?void 0:r.username,s,S).then((function(e){n(e.data.articles),N(e.data.articlesCount)}));break;case"Favorited":(function(e,t,a){return b.a.get("".concat(m,"/api/articles/?favorited=").concat(e,"&limit=").concat(2,"&offset=").concat(a),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})})(null===r||void 0===r?void 0:r.username,s,S).then((function(e){n(e.data.articles),N(e.data.articlesCount)}))}}),[u,S,s,null===r||void 0===r?void 0:r.username]);return Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-xs-12 col-md-10 offset-md-1",children:[Object(d.jsx)("div",{className:"articles-toggle",children:Object(d.jsxs)("ul",{className:"nav nav-pills outline-active",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(x.c,{className:"My"===u?"nav-link active":"nav-link",to:o,activeClassName:"selected",onClick:L,children:"My articles"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(x.c,{className:"Favorited"===u?"nav-link active":"nav-link",to:o,activeClassName:"selected",onClick:function(){h("Favorited")},children:"Favorited articles"})})]})}),Object(d.jsx)(y,{feeds:a}),g>2&&Object(d.jsx)(A.a,{style:{display:"flex",justifyContent:"center"},children:Object(d.jsx)(U,{pageNumber:Math.ceil(g/2),currentPage:q,onSelectPage:function(e){I(e)},handlePrev:function(){I(q-1)},handleNext:function(){I(q+1)}})})]})})})}function M(){var e=Object(f.c)((function(e){return e.user.data})),t=Object(v.g)();return Object(d.jsx)("div",{className:"profile-page",children:Object(d.jsx)("div",{className:"user-info",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-xs-12 col-md-10 offset-md-1",children:[(null===e||void 0===e?void 0:e.image)?Object(d.jsx)("img",{src:null===e||void 0===e?void 0:e.image,className:"user-img",alt:""}):Object(d.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAOVBMVEX///+4uLizs7Pa2tq8vLy5ubnIyMj6+vrf39/u7u7z8/P5+fm/v7/CwsLQ0NDT09Pl5eXp6emvr6+kWr5EAAADj0lEQVR4nO2ci5aqMAxFpS3lLXX+/2MvIKMOojTNSXTd1fMFe6V5kURPp6ysrKysrKz/XV0TrB0nWRua9tM0i9owDq4szKqidMMYPozWBe8mlI2MKX39ObJ23GG6kZ2bj0A15/IF00pWfACss++hrmBjp0sVhkOoBayvFaGqMYbpCnZWM1jro0y1cg1KHtb0BKqJy100qC6ORDUrKFAdR+AHuBq6rSaVwu/Y0vzqJifq9xUlBh9lBsk8YROp5vwlR3VJhZq5xPJ9FVdxXshJtTrpT7iYS+gZW8ehmiQTjSPLWFLmYhtLxlw8z5IyV9WzjVWU+GAMfKrCWDjWmf2GE5ZHU3WAN5yEfsULwFgCFYgfhwsWOhZTO5oN1lBBqaoBQQWv14AUv8hgE32DoSoM9mMDE4jwUAwoLGyer1FYY8bKWH/1pS7/pQkClk6xMxJU8QF/ZfA+qO/qwX0gomcW6Jq/tA3E+Dy4gcB8Jkp8KHInELPwH2SskdsNCz96Q3TzTmCAyq/W4Dp9Ff+7WmAycuKnLqEpJddcMsbiepeIZ81K3mEskttjNCUDS3Ablf6MAoPAB6X2N8ZjRzUbJbqXQbd/W7VJbarYvufORV90Gtkl58pFtZcK1ZTtaf5lBqXjpI4Sj8brnUzVsVcHprCimWGjJu4hjVe5GHlQOI5I42pNU11V2YNGx1nl661Zbe0P5hJO/UCwC758dRb48Iim9EHPYq3tj5l+yXqrY7L5fjKOaSVzozxYR4RawYSfsk67SJI9XYxMortgXqpeVxGnpm+4SpkyRLqf3DeYgOsnXCo+ceFvKi2X6Srw9w9i6DYL+mldYebMC9cZ5vjELvmAy4NSK2/0sMMFsReYCsWF86sbF2D+horBP1zseEStXTdczMrNmmi9Uckq3B1oX/ck3o0z3t1vXAy3Ry3Od7mSl2Wo66h9JZ9ySeSGu1KzhFQU/ioxGtFFZ6u07aKkv69cCc0qvELvYCWYS95YRcpmQ95YKeZCrKYjRDWXXNl5FLUEdahTnwMRl+oybdaziI2XhsMvWCSnb4Xrzl2kBbbWGxJfUScOFyxCLGLOj+LUx7dd0i3NowjtjZ5rkZxLz7UozlV5PaqiiJ5IaFWeq6LrD+okN1KxPo/4uRhBsR+MtS5WbChiTl9jFX19I/vZ+oQV+xmrmbYIietLsfyPUdRPbCcYrKoU/sQiKysrKysrC6t/1bE0CID+AmgAAAAASUVORK5CYII=",className:"user-img",alt:""}),Object(d.jsx)("h4",{children:null===e||void 0===e?void 0:e.username}),Object(d.jsx)("p",{children:(null===e||void 0===e?void 0:e.bio)||"..."}),Object(d.jsxs)("button",{className:"btn btn-sm btn-outline-secondary action-btn",onClick:function(){t.push("/settings")},children:[Object(d.jsx)("i",{className:"ion-plus-round"}),"\xa0 Edit Profile Settings"]})]})})})})})}function W(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(M,{}),Object(d.jsx)(F,{})]})}var Y=a(10);var V=Object(o.a)({mapPropsToValues:function(){return{imageURL:"",username:"",bio:"",email:"",password:""}},validationSchema:l.a().shape({username:l.b().required("Username is required"),email:l.b().email().required("Email is required")}),handleSubmit:function(){}})((function(e){var t=Object(f.b)(),a=Object(v.g)(),n=Object(f.c)((function(e){return e.user.data})),s=e.setFieldValue;Object(c.useEffect)((function(){s("imageURL",n.image),s("username",n.username),s("bio",n.bio),s("email",n.email)}),[n,s]);var r=Object(c.useState)(),o=Object(i.a)(r,2),l=o[0],j=o[1],u=window.localStorage.getItem("jwtToken");return Object(d.jsx)("form",{onSubmit:function(c){c.preventDefault();var n=e.values;(function(e,t){return b.a.put("".concat(m,"/api/user"),{user:{image:e.imageURL,bio:e.bio,username:e.username,email:e.email,password:e.password},"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})})({imageURL:n.imageURL,bio:n.bio,username:n.username,email:n.email,password:n.password},u).then((function(e){var c=e.data.user;t(P.saveUserInStoreSuccess(c)),a.push("/profile/".concat(c.username))})).catch((function(e){var t=Object(Y.a)({},e.response.data.errors);j(t)}))},children:Object(d.jsxs)("fieldset",{children:[Object(d.jsx)("ul",{className:"form-group",children:l&&Object.keys(l).map((function(e,t){return Object(d.jsx)("li",{children:Object(d.jsxs)("p",{className:"error-messages",children:[e," ",l[e]]})},t)}))}),Object(d.jsx)("fieldset",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control",type:"text",placeholder:"URL of profile picture",name:"imageURL",value:e.values.imageURL,onChange:e.handleChange})}),Object(d.jsx)("fieldset",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control form-control-lg",type:"text",placeholder:"Username",name:"username",value:e.values.username,onChange:e.handleChange})}),Object(d.jsx)("fieldset",{className:"form-group",children:Object(d.jsx)("textarea",{className:"form-control form-control-lg",placeholder:"Short bio about you",rows:6,name:"bio",value:e.values.bio,onChange:e.handleChange})}),Object(d.jsx)("fieldset",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",name:"email",value:e.values.email,onChange:e.handleChange})}),Object(d.jsx)("fieldset",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",name:"password",value:e.values.password,onChange:e.handleChange})}),Object(d.jsx)("button",{className:"btn btn-lg btn-primary pull-xs-right",children:"Update Settings"})]})})}));function K(){var e=Object(v.g)(),t=Object(f.b)();return Object(d.jsxs)("div",{children:[Object(d.jsx)("hr",{}),Object(d.jsx)("button",{className:"btn btn-outline-danger","ng-click":"$ctrl.logout()",onClick:function(){window.localStorage.removeItem("jwtToken"),t(B()),e.push("/")},children:"Or click here to logout."})]})}function D(){return Object(d.jsx)("div",{className:"settings-page",children:Object(d.jsx)("div",{className:"container page",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-md-6 offset-md-3 col-xs-12",children:[Object(d.jsx)("h1",{className:"text-xs-center",children:"Your Settings"}),Object(d.jsx)(V,{}),Object(d.jsx)(K,{})]})})})})}function X(){var e,t,a,n,s,r,o=Object(v.h)().slug,l=window.localStorage.getItem("jwtToken"),j=Object(c.useState)(),u=Object(i.a)(j,2),O=u[0],p=u[1],f=Object(c.useState)(!1),g=Object(i.a)(f,2),N=g[0],S=g[1],y=Object(c.useState)(null===O||void 0===O?void 0:O.favoritesCount),k=Object(i.a)(y,2),A=k[0],T=k[1],U=Object(c.useState)(),E=Object(i.a)(U,2),q=E[0],I=E[1],L=Object(v.g)(),P=Object(c.useState)(),B=Object(i.a)(P,2),z=B[0],R=B[1];Object(c.useEffect)((function(){(function(e,t){return b.a.get("".concat(m,"/api/articles/").concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})})(o,l).then((function(e){var t,a;console.log(e),p(e.data.article),I(null===(t=e.data.article)||void 0===t?void 0:t.favorited),T(null===(a=e.data.article)||void 0===a?void 0:a.favoritesCount),h(l).then((function(t){t.data.user.username==e.data.article.author.username?S(!0):S(!1)})),function(e,t){return b.a.get("".concat(m,"/api/profiles/").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}(l,e.data.article.author.username).then((function(e){e.data.profile.following?R(!0):R(!1)}))}))}),[o]);var F=function(e){z?function(e,t){return b.a.delete("".concat(m,"/api/profiles/").concat(t,"/follow"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}(l,e).then((function(e){R(!1)})):function(e,t){return b.a.post("".concat(m,"/api/profiles/").concat(t,"/follow"),{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}(l,e).then((function(e){R(!0)}))};return Object(d.jsxs)("div",{className:"article-page",children:[Object(d.jsx)("div",{className:"banner",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{children:null===O||void 0===O?void 0:O.title}),Object(d.jsxs)("div",{className:"article-meta",children:[Object(d.jsx)("img",{src:(null===O||void 0===O||null===(e=O.author)||void 0===e?void 0:e.image)?O.author.image:"https://static.productionready.io/images/smiley-cyrus.jpg",alt:""}),Object(d.jsxs)("div",{className:"info",children:[Object(d.jsx)(x.c,{to:"/profile/"+(null===O||void 0===O||null===(t=O.author)||void 0===t?void 0:t.username),children:Object(d.jsx)("h5",{children:null===O||void 0===O||null===(a=O.author)||void 0===a?void 0:a.username})}),Object(d.jsx)("span",{className:"date",children:null===O||void 0===O?void 0:O.updatedAt})]}),l?Object(d.jsx)("div",{children:N?Object(d.jsxs)("div",{children:[Object(d.jsx)(x.c,{to:"/editor/"+(null===O||void 0===O?void 0:O.slug),children:Object(d.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",children:[Object(d.jsx)("i",{className:"ion-edit"}),"\xa0 Edit Article"]})}),"\xa0\xa0",Object(d.jsxs)("button",{className:"btn btn-sm btn-outline-danger",onClick:function(){(function(e,t){return b.a.delete("".concat(m,"/api/articles/").concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})})(o,l).then((function(e){L.push("")}))},children:[Object(d.jsx)("i",{className:"ion-trash-a"}),"\xa0 Delete Article"]})]}):Object(d.jsxs)("div",{children:[Object(d.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",onClick:function(){var e;return F(null===O||void 0===O||null===(e=O.author)||void 0===e?void 0:e.username)},children:[z?Object(d.jsx)("i",{}):Object(d.jsx)("i",{className:"ion-plus-round"}),"\xa0"," ",z?"Unfollow ".concat(null===O||void 0===O||null===(n=O.author)||void 0===n?void 0:n.username):"Follow ".concat(null===O||void 0===O||null===(s=O.author)||void 0===s?void 0:s.username),Object(d.jsx)("span",{className:"counter"})]}),"\xa0\xa0",Object(d.jsxs)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(){return function(e){q?C(l,e).then((function(e){var t;T(null===(t=e.data.article)||void 0===t?void 0:t.favoritesCount),I(!1)})):w(l,e).then((function(e){var t;T(null===(t=e.data.article)||void 0===t?void 0:t.favoritesCount),I(!0)}))}(null===O||void 0===O?void 0:O.slug)},children:[q?Object(d.jsx)("i",{}):Object(d.jsx)("i",{className:"ion-heart"}),"\xa0 ",q?"Unfavorite Post":"Favorite Post",Object(d.jsxs)("span",{className:"counter",children:["(",A,")"]})]})]})}):Object(d.jsx)("div",{})]})]})}),Object(d.jsxs)("div",{className:"container page",children:[Object(d.jsx)("div",{className:"row article-content",children:Object(d.jsx)("div",{className:"col-md-12",children:Object(d.jsx)("p",{children:null===O||void 0===O?void 0:O.body})})}),Object(d.jsx)("div",{className:"tag-list",children:null===O||void 0===O||null===(r=O.tagList)||void 0===r?void 0:r.map((function(e){return Object(d.jsx)("span",{"ng-repeat":"tag in $ctrl.article.tagList",className:"tag-default tag-pill ng-binding ng-scope",children:e},e)}))}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-xs-12 col-md-8 offset-md-2",children:[Object(d.jsxs)("form",{className:"card comment-form",children:[Object(d.jsx)("div",{className:"card-block",children:Object(d.jsx)("textarea",{className:"form-control",placeholder:"Write a comment...",rows:3})}),Object(d.jsxs)("div",{className:"card-footer",children:[Object(d.jsx)("img",{src:"http://i.imgur.com/Qr71crq.jpg",className:"comment-author-img",alt:""}),Object(d.jsx)("button",{className:"btn btn-sm btn-primary",children:"Post Comment"})]})]}),Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("div",{className:"card-block",children:Object(d.jsx)("p",{className:"card-text",children:"With supporting text below as a natural lead-in to additional content."})}),Object(d.jsxs)("div",{className:"card-footer",children:[Object(d.jsx)("a",{href:"",className:"comment-author",children:Object(d.jsx)("img",{src:"http://i.imgur.com/Qr71crq.jpg",className:"comment-author-img",alt:""})}),"\xa0",Object(d.jsx)("a",{href:"",className:"comment-author",children:"Jacob Schmidt"}),Object(d.jsx)("span",{className:"date-posted",children:"Dec 29th"})]})]}),Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("div",{className:"card-block",children:Object(d.jsx)("p",{className:"card-text",children:"With supporting text below as a natural lead-in to additional content."})}),Object(d.jsxs)("div",{className:"card-footer",children:[Object(d.jsx)("a",{href:"",className:"comment-author",children:Object(d.jsx)("img",{src:"http://i.imgur.com/Qr71crq.jpg",className:"comment-author-img",alt:""})}),"\xa0",Object(d.jsx)("a",{href:"",className:"comment-author",children:"Jacob Schmidt"}),Object(d.jsx)("span",{className:"date-posted",children:"Dec 29th"}),Object(d.jsxs)("span",{className:"mod-options",children:[Object(d.jsx)("i",{className:"ion-edit"}),Object(d.jsx)("i",{className:"ion-trash-a"})]})]})]})]})})]})]})}var J=Object(o.a)({mapPropsToValues:function(){return{username:"",email:"",password:""}},validationSchema:l.a().shape({username:l.b().required("Username is required"),email:l.b().email().required("Email is required"),password:l.b().required("Please provide a valid password")}),handleSubmit:function(){}})((function(e){var t=Object(f.b)(),a=Object(v.g)(),n=Object(c.useState)(),s=Object(i.a)(n,2),r=s[0],o=s[1];return Object(d.jsxs)("form",{onSubmit:function(c){c.preventDefault();var n,s=e.values,i=s.username,r=s.email,l=s.password;(n={username:i,email:r,password:l},b.a.post("".concat(m,"/api/users"),{user:{username:n.username,email:n.email,password:n.password},"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},{headers:{"Content-Type":"application/json"}})).then((function(e){var c=e.data.user;t(P.saveUserInStoreSuccess(c)),window.localStorage.setItem("jwtToken",c.token),a.push("/")})).catch((function(e){var t=Object(Y.a)({},e.response.data.errors);o(t)}))},children:[Object(d.jsxs)("fieldset",{className:"form-group",children:[r&&Object.keys(r).map((function(e,t){return Object(d.jsx)("div",{children:Object(d.jsxs)("p",{className:"error-messages",children:[e," ",r[e]]})},t)})),Object(d.jsx)("p",{className:"error-messages",children:e.errors.username}),Object(d.jsx)("input",{className:"form-control form-control-lg",type:"text",placeholder:"Username",name:"username",value:e.values.username,onChange:e.handleChange})]}),Object(d.jsxs)("fieldset",{className:"form-group",children:[Object(d.jsx)("p",{className:"error-messages",children:e.errors.email}),Object(d.jsx)("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",name:"email",value:e.values.email,onChange:e.handleChange})]}),Object(d.jsxs)("fieldset",{className:"form-group",children:[Object(d.jsx)("p",{className:"error-messages",children:e.errors.password}),Object(d.jsx)("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",name:"password",value:e.values.password,onChange:e.handleChange})]}),Object(d.jsx)("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:!e.isValid||!e.values.email,children:"Sign up"})]})}));function G(){return Object(d.jsx)("div",{className:"auth-page",children:Object(d.jsx)("div",{className:"container page",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-md-6 offset-md-3 col-xs-12",children:[Object(d.jsx)("h1",{className:"text-xs-center",children:"Sign up"}),Object(d.jsx)("p",{className:"text-xs-center",children:Object(d.jsx)(x.b,{to:"/login",children:"Have an account?"})}),Object(d.jsx)(J,{})]})})})})}var Z=a(22),Q=["Component","auth"],H=function(e){var t=e.Component,a=e.auth,c=Object(Z.a)(e,Q);return Object(d.jsx)(v.b,Object(Y.a)(Object(Y.a)({},c),{},{render:function(e){return(null===a||void 0===a?void 0:a.length)>0?Object(d.jsx)(t,{}):Object(d.jsx)(v.a,{to:"/",exact:!0})}}))};var $=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){var t;return null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.data})),a=Object(c.useState)(!1),n=Object(i.a)(a,2),s=n[0],r=n[1],o=window.localStorage.getItem("jwtToken");return Object(c.useEffect)((function(){o&&!(null===t||void 0===t?void 0:t.username)&&h(o).then((function(t){var a=t.data.user;e(P.saveUserInStoreSuccess(a))}))}),[o,t,e]),Object(c.useEffect)((function(){var e=window.localStorage.getItem("jwtToken");r(!!e)}),[t]),Object(c.useEffect)((function(){document.title=(null===t||void 0===t?void 0:t.username)?"@".concat(null===t||void 0===t?void 0:t.username," - Conduit"):"Conduit"}),[t]),Object(d.jsxs)(x.a,{children:[Object(d.jsx)(g,{userToken:s}),Object(d.jsxs)(v.d,{children:[Object(d.jsx)(v.b,{exact:!0,path:"/",children:Object(d.jsx)(E,{userToken:s})}),Object(d.jsx)(v.b,{path:"/login",children:Object(d.jsx)(R,{})}),Object(d.jsx)(v.b,{path:"/register",children:Object(d.jsx)(G,{})}),Object(d.jsx)(H,{exact:!0,path:"/editor",auth:window.localStorage.getItem("jwtToken"),Component:O}),Object(d.jsx)(H,{path:"/editor/:slug",auth:window.localStorage.getItem("jwtToken"),Component:O}),Object(d.jsx)(H,{path:"/settings",auth:window.localStorage.getItem("jwtToken"),Component:D}),Object(d.jsx)(H,{path:"/profile",auth:window.localStorage.getItem("jwtToken"),Component:W}),Object(d.jsx)(H,{path:"/profile/".concat(t.username),auth:window.localStorage.getItem("jwtToken"),Component:W}),Object(d.jsx)(v.b,{path:"/article/:slug",children:Object(d.jsx)(X,{})}),Object(d.jsx)(v.a,{to:"/"})]}),Object(d.jsx)(p,{})]})},_=a(43),ee=a(113),te=a(71),ae=a.n(te),ce=a(114),ne=ae.a.mark(se);function se(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.a)([]);case 2:case"end":return e.stop()}}),ne)}var ie=se;var re=Object(_.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.user,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L(P.saveUserInStoreRequest):return Object(Y.a)(Object(Y.a)({},e),{},{isLoading:!0});case L(P.saveUserInStoreSuccess):return Object(Y.a)(Object(Y.a)({},e),{},{isLoading:!1,data:t.payload});case L(P.saveUserInStoreFailure):return Object(Y.a)(Object(Y.a)({},e),{},{isLoading:!1});case"DELETE_USER":return Object(Y.a)(Object(Y.a)({},e),{},{isLoading:!1,data:{}});default:return e}}}),oe=Object(ee.a)(),le=Object(_.c)(re,Object(_.a)(oe));oe.run(ie),s.a.render(Object(d.jsx)(f.a,{store:le,children:Object(d.jsx)($,{})}),document.getElementById("root"))}},[[249,1,2]]]);
//# sourceMappingURL=main.74d09b17.chunk.js.map